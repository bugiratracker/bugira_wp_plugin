(function(){var e=String.fromCharCode,t=this,o={escape:function(e){return e}},n=function(t){function o(e,t,o,n){var r,a,d,s,l,p,c,u,f,b;if((t?t.ownerDocument||t:V)!==B&&R(t),t=t||B,o=o||[],!e||"string"!=typeof e)return o;if(1!==(s=t.nodeType)&&9!==s)return[];if(P&&!n){if(r=me.exec(e))if(!(d=r[1])){if(r[2])return ee.apply(o,t.getElementsByTagName(e)),o;if((d=r[3])&&C.getElementsByClassName&&t.getElementsByClassName)return ee.apply(o,t.getElementsByClassName(d)),o}else if(9===s){if(a=t.getElementById(d),!(a&&a.parentNode))return o;if(a.id===d)return o.push(a),o}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(d))&&W(t,a)&&a.id===d)return o.push(a),o;if(C.qsa&&(!M||!M.test(e))){if(u=c=U,f=t,b=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(p=h(e),(c=t.getAttribute("id"))?u=c.replace(be,"\\$&"):t.setAttribute("id",u),u="[id='"+u+"'] ",l=p.length;l--;)p[l]=u+m(p[l]);f=fe.test(e)&&g(t.parentNode)||t,b=p.join(",")}if(b)try{return ee.apply(o,f.querySelectorAll(b)),o}catch(e){}finally{c||t.removeAttribute("id")}}}return k(e.replace(ie,"$1"),t,o,n)}function n(){function e(o,n){return t.push(o+" ")>_.cacheLength&&delete e[t.shift()],e[o+" "]=n}var t=[];return e}function r(e){return e[U]=!0,e}function a(e){var t=B.createElement("div");try{return!!e(t)}catch(t){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function d(e,t){for(var o=e.split("|"),n=e.length;n--;)_.attrHandle[o[n]]=t}function s(e,t){var o=t&&e,n=o&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||-2147483648)-(~e.sourceIndex||-2147483648);if(n)return n;if(o)for(;o=o.nextSibling;)if(o===t)return-1;return e?1:-1}function l(e){return function(t){var o=t.nodeName.toLowerCase();return"input"===o&&t.type===e}}function p(e){return function(t){var o=t.nodeName.toLowerCase();return("input"===o||"button"===o)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(o,n){for(var r,a=e([],o.length,t),d=a.length;d--;)o[r=a[d]]&&(o[r]=!(n[r]=o[r]))})})}function g(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function h(e,t){var n,r,i,a,d,s,l,p=G[e+" "];if(p)return t?0:p.slice(0);for(d=e,s=[],l=_.preFilter;d;){for(a in(!n||(r=ae.exec(d)))&&(r&&(d=d.slice(r[0].length)||d),s.push(i=[])),n=!1,(r=de.exec(d))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ie," ")}),d=d.slice(n.length)),_.filter)(r=ce[a].exec(d))&&(!l[a]||(r=l[a](r)))&&(n=r.shift(),i.push({value:n,type:a,matches:r}),d=d.slice(n.length));if(!n)break}return t?d.length:d?o.error(e):G(e,s).slice(0)}function m(e){for(var t=0,o=e.length,n="";t<o;t++)n+=e[t].value;return n}function f(e,t,o){var n=t.dir,r=o&&"parentNode"===n,i=j++;return t.first?function(t,o,i){for(;t=t[n];)if(1===t.nodeType||r)return e(t,o,i)}:function(t,o,a){var d,s,l,p=X+" "+i;if(a){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,o,a))return!0;}else for(;t=t[n];)if(1===t.nodeType||r)if(l=t[U]||(t[U]={}),(s=l[n])&&s[0]===p){if(!0===(d=s[1])||d===S)return!0===d;}else if(s=l[n]=[p],s[1]=e(t,o,a)||S,!0===s[1])return!0}}function b(e){return 1<e.length?function(t,o,n){for(var r=e.length;r--;)if(!e[r](t,o,n))return!1;return!0}:e[0]}function y(e,t,o,n,r){for(var a,d=[],s=0,l=e.length;s<l;s++)(a=e[s])&&(!o||o(a,n,r))&&(d.push(a),null!=t&&t.push(s));return d}function x(e,t,o,n,a,i){return n&&!n[U]&&(n=x(n)),a&&!a[U]&&(a=x(a,i)),r(function(r,d,s,l){var p,c,g,u=[],h=[],m=d.length,f=r||E(t||"*",s.nodeType?[s]:s,[]),b=e&&(r||!t)?y(f,u,e,s,l):f,x=o?a||(r?e:m||n)?[]:d:b;if(o&&o(b,x,s,l),n)for(p=y(x,h),n(p,[],s,l),c=p.length;c--;)(g=p[c])&&(x[h[c]]=!(b[h[c]]=g));if(!r)x=y(x===d?x.splice(m,x.length):x),a?a(null,d,x,l):ee.apply(d,x);else if(a||e){if(a){for(p=[],c=x.length;c--;)(g=x[c])&&p.push(b[c]=g);a(null,x=[],p,l)}for(c=x.length;c--;)(g=x[c])&&-1<(p=a?oe.call(r,g):u[c])&&(r[p]=!(d[p]=g))}})}function w(e){for(var t,o,n,r=e.length,a=_.relative[e[0].type],d=a||_.relative[" "],s=a?1:0,l=f(function(e){return e===t},d,!0),p=f(function(e){return-1<oe.call(t,e)},d,!0),c=[function(e,o,n){return!a&&(n||o!==A)||((t=o).nodeType?l(e,o,n):p(e,o,n))}];s<r;s++)if(o=_.relative[e[s].type])c=[f(b(c),o)];else{if(o=_.filter[e[s].type].apply(null,e[s].matches),o[U]){for(n=++s;n<r&&!_.relative[e[n].type];n++);return x(1<s&&b(c),1<s&&m(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ie,"$1"),o,s<n&&w(e.slice(s,n)),n<r&&w(e=e.slice(n)),n<r&&m(e))}c.push(o)}return b(c)}function v(e,t){var n=0,a=0<t.length,d=0<e.length,i=function(r,s,l,p,c){var g,u,h,m=0,f="0",b=r&&[],x=[],w=A,v=r||d&&_.find.TAG("*",c),E=X+=null==w?1:Math.random()||.1,k=v.length;for(c&&(A=s!==B&&s,S=n);f!==k&&null!=(g=v[f]);f++){if(d&&g){for(u=0;h=e[u++];)if(h(g,s,l)){p.push(g);break}c&&(X=E,S=++n)}a&&((g=!h&&g)&&m--,r&&b.push(g))}if(m+=f,a&&f!==m){for(u=0;h=t[u++];)h(b,x,s,l);if(r){if(0<m)for(;f--;)b[f]||x[f]||(x[f]=K.call(p));x=y(x)}ee.apply(p,x),c&&!r&&0<x.length&&1<m+t.length&&o.uniqueSort(p)}return c&&(X=E,A=w),b};return a?r(i):i}function E(e,t,n){for(var r=0,a=t.length;r<a;r++)o(e,t[r],n);return n}function k(e,t,o,n){var r,a,d,s,l,p=h(e);if(!n&&1===p.length){if(a=p[0]=p[0].slice(0),2<a.length&&"ID"===(d=a[0]).type&&C.getById&&9===t.nodeType&&P&&_.relative[a[1].type]){if(t=(_.find.ID(d.matches[0].replace(ye,xe),t)||[])[0],!t)return o;e=e.slice(a.shift().value.length)}for(r=ce.needsContext.test(e)?0:a.length;r--&&(d=a[r],!_.relative[s=d.type]);)if((l=_.find[s])&&(n=l(d.matches[0].replace(ye,xe),fe.test(a[0].type)&&g(t.parentNode)||t))){if(a.splice(r,1),e=n.length&&m(a),!e)return ee.apply(o,n),o;break}}return L(e,p)(n,t,!P,o,fe.test(e)&&g(t.parentNode)||t),o}var T,C,S,_,N,I,L,A,D,O,R,B,z,P,M,H,F,W,U="sizzle"+-new Date,V=t.document,X=0,j=0,q=n(),G=n(),Y=n(),Q=function(e,t){return e===t&&(O=!0),0},$={}.hasOwnProperty,J=[],K=J.pop,Z=J.push,ee=J.push,te=J.slice,oe=J.indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(this[t]===e)return t;return-1},ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),re=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+"\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[\\w#-]|[^\\x00-\\xa0])+)|)|)[\\x20\\t\\r\\n\\f]*\\]".replace(3,8)+")*)|.*)\\)|)",ie=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ae=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,de=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,se=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,le=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\(((['"])((?:\\.|[^\\])*?)\3|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)[\x20\t\r\n\f]*(?:([*^$|!~]?=)[\x20\t\r\n\f]*(?:(['"])((?:\\.|[^\\])*?)\8|((?:\\.|[\w#-]|[^\x00-\xa0])+)|)|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,pe=/^(?:\\.|[\w#-]|[^\x00-\xa0])+$/,ce={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w*-]|[^\x00-\xa0])+)/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)[\x20\t\r\n\f]*(?:([*^$|!~]?=)[\x20\t\r\n\f]*(?:(['"])((?:\\.|[^\\])*?)\3|((?:\\.|[\w#-]|[^\x00-\xa0])+)|)|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\(((['"])((?:\\.|[^\\])*?)\3|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)[\x20\t\r\n\f]*(?:([*^$|!~]?=)[\x20\t\r\n\f]*(?:(['"])((?:\\.|[^\\])*?)\8|((?:\\.|[\w#-]|[^\x00-\xa0])+)|)|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ge=/^(?:input|select|textarea|button)$/i,ue=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fe=/[+~]/,be=/'|\\/g,ye=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,xe=function(t,o,n){var r="0x"+o-65536;return r!=r||n?o:0>r?e(r+65536):e(55296|r>>10,56320|1023&r)};try{ee.apply(J=te.call(V.childNodes),V.childNodes),J[V.childNodes.length].nodeType}catch(t){ee={apply:J.length?function(e,t){Z.apply(e,te.call(t))}:function(e,t){for(var o=e.length,n=0;e[o++]=t[n++];);e.length=o-1}}}for(T in C=o.support={},I=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=o.setDocument=function(e){var t,o=e?e.ownerDocument||e:V,n=o.defaultView;return o!==B&&9===o.nodeType&&o.documentElement?(B=o,z=o.documentElement,P=!I(o),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){R()},!1):n.attachEvent&&n.attachEvent("onunload",function(){R()})),C.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=a(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=he.test(o.getElementsByClassName)&&a(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),C.getById=a(function(e){return z.appendChild(e).id=U,!o.getElementsByName||!o.getElementsByName(U).length}),C.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var o=t.getElementById(e);return o&&o.parentNode?[o]:[]}},_.filter.ID=function(e){var t=e.replace(ye,xe);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(ye,xe);return function(e){var o="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return o&&o.value===t}}),_.find.TAG=C.getElementsByTagName?function(e,t){if("undefined"!=typeof t.getElementsByTagName)return t.getElementsByTagName(e)}:function(e,t){var o,n=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;o=a[r++];)1===o.nodeType&&n.push(o);return n}return a},_.find.CLASS=C.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&P)return t.getElementsByClassName(e)},H=[],M=[],(C.qsa=he.test(o.querySelectorAll))&&(a(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&M.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),e.querySelectorAll(":checked").length||M.push(":checked")}),a(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(C.matchesSelector=he.test(F=z.webkitMatchesSelector||z.mozMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&a(function(e){C.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),H.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\8|((?:\\\\.|[\\w#-]|[^\\x00-\\xa0])+)|)|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),M=M.length&&new RegExp(M.join("|")),H=H.length&&new RegExp(H.join("|")),t=he.test(z.compareDocumentPosition),W=t||he.test(z.contains)?function(e,t){var o=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&(o.contains?o.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Q=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!C.sortDetached&&t.compareDocumentPosition(e)===n?e===o||e.ownerDocument===V&&W(V,e)?-1:t===o||t.ownerDocument===V&&W(V,t)?1:D?oe.call(D,e)-oe.call(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,r=0,a=e.parentNode,d=t.parentNode,l=[e],p=[t];if(!a||!d)return e===o?-1:t===o?1:a?-1:d?1:D?oe.call(D,e)-oe.call(D,t):0;if(a===d)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)p.unshift(n);for(;l[r]===p[r];)r++;return r?s(l[r],p[r]):l[r]===V?-1:p[r]===V?1:0},o):B},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==B&&R(e),t=t.replace(se,"='$1']"),C.matchesSelector&&P&&(!H||!H.test(t))&&(!M||!M.test(t)))try{var n=F.call(e,t);if(n||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(t){}return 0<o(t,B,null,[e]).length},o.contains=function(e,t){return(e.ownerDocument||e)!==B&&R(e),W(e,t)},o.attr=function(e,t){(e.ownerDocument||e)!==B&&R(e);var o=_.attrHandle[t.toLowerCase()],n=o&&$.call(_.attrHandle,t.toLowerCase())?o(e,t,!P):void 0;return void 0===n?C.attributes||!P?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null:n},o.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,o=[],n=0,r=0;if(O=!C.detectDuplicates,D=!C.sortStable&&e.slice(0),e.sort(Q),O){for(;t=e[r++];)t===e[r]&&(n=o.push(r));for(;n--;)e.splice(o[n],1)}return D=null,e},N=o.getText=function(e){var t,o="",n=0,r=e.nodeType;if(!r)for(;t=e[n++];)o+=N(t);else if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)o+=N(e)}else if(3===r||4===r)return e.nodeValue;return o},_=o.selectors={cacheLength:50,createPseudo:r,match:ce,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,xe),e[3]=(e[4]||e[5]||"").replace(ye,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(!e[3]&&o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var t,o=!e[5]&&e[2];return ce.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:o&&le.test(o)&&(t=h(o,!0))&&(t=o.indexOf(")",o.length-t)-o.length)&&(e[0]=e[0].slice(0,t),e[2]=o.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=o.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&-1<i.indexOf(n):"$="===t?n&&i.slice(-n.length)===n:"~="===t?-1<(" "+i+" ").indexOf(n):"|="==t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,o,n,r){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),d="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,o,s){var l,p,c,g,u,h,m=i==a?"previousSibling":"nextSibling",f=t.parentNode,b=d&&t.nodeName.toLowerCase(),y=!s&&!d;if(f){if(i){for(;m;){for(c=t;c=c[m];)if(d?c.nodeName.toLowerCase()===b:1===c.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?f.firstChild:f.lastChild],a&&y){for(p=f[U]||(f[U]={}),l=p[e]||[],u=l[0]===X&&l[1],g=l[0]===X&&l[2],c=u&&f.childNodes[u];c=++u&&c&&c[m]||(g=u=0)||h.pop();)if(1===c.nodeType&&++g&&c===t){p[e]=[X,u,g];break}}else if(y&&(l=(t[U]||(t[U]={}))[e])&&l[0]===X)g=l[1];else for(;(c=++u&&c&&c[m]||(g=u=0)||h.pop())&&!((d?c.nodeName.toLowerCase()===b:1===c.nodeType)&&++g&&(y&&((c[U]||(c[U]={}))[e]=[X,g]),c===t)););return g-=r,g===n||0==g%n&&0<=g/n}}},PSEUDO:function(e,t){var n,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return a[U]?a(t):1<a.length?(n=[e,e,"",t],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,o){for(var n,r=a(e,t),d=r.length;d--;)n=oe.call(e,r[d]),e[n]=!(o[n]=r[d])}):function(e){return a(e,0,n)}):a}},pseudos:{not:r(function(e){var t=[],o=[],n=L(e.replace(ie,"$1"));return n[U]?r(function(e,t,o,r){for(var a,d=n(e,null,r,[]),s=e.length;s--;)(a=d[s])&&(e[s]=!(t[s]=a))}):function(e,r,i){return t[0]=e,n(t,null,i,o),!o.pop()}}),has:r(function(e){return function(t){return 0<o(e,t).length}}),contains:r(function(e){return function(t){return-1<(t.textContent||t.innerText||N(t)).indexOf(e)}}),lang:r(function(e){return pe.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(ye,xe).toLowerCase(),function(t){var o;do if(o=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return o=o.toLowerCase(),o===e||0===o.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var o=t.location&&t.location.hash;return o&&o.slice(1)===e.id},root:function(e){return e===z},focus:function(e){return e===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return ue.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,o){return[0>o?o+t:o]}),even:c(function(e,t){for(var o=0;o<t;o+=2)e.push(o);return e}),odd:c(function(e,t){for(var o=1;o<t;o+=2)e.push(o);return e}),lt:c(function(e,t,o){for(var n=0>o?o+t:o;0<=--n;)e.push(n);return e}),gt:c(function(e,t,o){for(var n=0>o?o+t:o;++n<t;)e.push(n);return e})}},_.pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[T]=l(T);for(T in{submit:!0,reset:!0})_.pseudos[T]=p(T);return u.prototype=_.filters=_.pseudos,_.setFilters=new u,L=o.compile=function(e,t){var o,n=[],r=[],a=Y[e+" "];if(!a){for(t||(t=h(e)),o=t.length;o--;)a=w(t[o]),a[U]?n.push(a):r.push(a);a=Y(e,v(r,n))}return a},C.sortStable=U.split("").sort(Q).join("")===U,C.detectDuplicates=!!O,R(),C.sortDetached=a(function(e){return 1&e.compareDocumentPosition(B.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||d("type|href|height|width",function(e,t,o){if(!o)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||d("value",function(e,t,o){if(!o&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||d("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(e,t,o){var n;if(!o)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),o}(window);!function(o){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=o();else if("function"==typeof define&&define.amd)define([],o);else{var e;"undefined"==typeof window?"undefined"==typeof t?"undefined"!=typeof self&&(e=self):e=t:e=window,e.html2canvas=o()}}(function(){var o,n=Math.max,i=Math.min,r=Math.round,a=Math.floor;return function d(p,e,t){function r(i,o){if(!e[i]){if(!p[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var c=e[i]={exports:{}};p[i][0].call(c.exports,function(t){var e=p[i][1][t];return r(e?e:t)},c,c.exports,d,p,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(n,r,i){(function(t){(function(n){function d(e){throw RangeError(C[e])}function s(e,t){for(var o=e.length;o--;)e[o]=t(e[o]);return e}function l(e,t){return s(e.split(T),t).join(".")}function p(e){for(var t,o,n=[],r=0,i=e.length;r<i;)t=e.charCodeAt(r++),55296<=t&&56319>=t&&r<i?(o=e.charCodeAt(r++),56320==(64512&o)?n.push(((1023&t)<<10)+(1023&o)+65536):(n.push(t),r--)):n.push(t);return n}function c(e){return s(e,function(e){var t="";return 65535<e&&(e-=65536,t+=_(55296|1023&e>>>10),e=56320|1023&e),t+=_(e),t}).join("")}function g(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:36}function u(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,o){var n=0;for(e=o?S(e/700):e>>1,e+=S(e/t);455<e;n+=36)e=S(e/35);return S(n+36*e/(e+38))}function m(e){var o,r,a,s,l,p,u,m,f,b,y=[],x=e.length,v=0,E=128,T=72;for(r=e.lastIndexOf("-"),0>r&&(r=0),a=0;a<r;++a)128<=e.charCodeAt(a)&&d("not-basic"),y.push(e.charCodeAt(a));for(s=0<r?r+1:0;s<x;){for(l=v,p=1,u=36;;u+=36){if(s>=x&&d("invalid-input"),m=g(e.charCodeAt(s++)),(36<=m||m>S((2147483647-v)/p))&&d("overflow"),v+=m*p,f=u<=T?1:u>=T+26?26:u-T,m<f)break;b=36-f,p>S(2147483647/b)&&d("overflow"),p*=b}o=y.length+1,T=h(v-l,o,0==l),S(v/o)>2147483647-E&&d("overflow"),E+=S(v/o),v%=o,y.splice(v++,0,E)}return c(y)}function f(e){var o,r,i,a,s,l,c,g,f,b,y,x,w,v,E,T=[];for(e=p(e),x=e.length,o=128,r=0,s=72,l=0;l<x;++l)y=e[l],128>y&&T.push(_(y));for(i=a=T.length,a&&T.push("-");i<x;){for(c=2147483647,l=0;l<x;++l)y=e[l],y>=o&&y<c&&(c=y);for(w=i+1,c-o>S((2147483647-r)/w)&&d("overflow"),r+=(c-o)*w,o=c,l=0;l<x;++l)if(y=e[l],y<o&&2147483647<++r&&d("overflow"),y==o){for(g=r,f=36;;f+=36){if(b=f<=s?1:f>=s+26?26:f-s,g<b)break;E=g-b,v=36-b,T.push(_(u(b+E%v,0))),g=S(E/v)}T.push(_(u(g,0))),s=h(r,w,i==a),r=0,++i}++r,++o}return T.join("")}var b="object"==typeof i&&i,y="object"==typeof r&&r&&r.exports==b&&r,x="object"==typeof t&&t;(x.global===x||x.window===x)&&(n=x);var w,v,E=/^xn--/,k=/[^ -~]/,T=/\x2E|\u3002|\uFF0E|\uFF61/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=a,_=e;if(w={version:"1.2.4",ucs2:{decode:p,encode:c},decode:m,encode:f,toASCII:function(e){return l(e,function(e){return k.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return l(e,function(e){return E.test(e)?m(e.slice(4).toLowerCase()):e})}},"function"==typeof o&&"object"==typeof o.amd&&o.amd)o("punycode",function(){return w});else if(!b||b.nodeType)n.punycode=w;else if(y)y.exports=w;else for(v in w)w.hasOwnProperty(v)&&(b[v]=w[v])})(this)}).call(this,"undefined"==typeof t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],2:[function(e,t){function o(e,t,o){e.defaultView&&(t!==e.defaultView.pageXOffset||o!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,o)}function n(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(o){a("Unable to copy canvas content from",t,o)}}function r(e,t){for(var o=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;)(!0===t||1!==i.nodeType||"SCRIPT"!==i.nodeName)&&o.appendChild(r(i,t)),i=i.nextSibling;return 1===e.nodeType&&(o._scrollTop=e.scrollTop,o._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?n(e,o):("TEXTAREA"===e.nodeName||"SELECT"===e.nodeName)&&(o.value=e.value)),o}function i(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var t=e.firstChild;t;)i(t),t=t.nextSibling}}var a=e("./log");t.exports=function(e,t,n,a,d,s,l){var p=r(e.documentElement,d.javascriptEnabled),c=t.createElement("iframe");return c.className="html2canvas-container",c.style.visibility="hidden",c.style.position="fixed",c.style.left="-10000px",c.style.top="0px",c.style.border="0",c.width=n,c.height=a,c.scrolling="no",t.body.appendChild(c),new Promise(function(t){var n=c.contentWindow.document;c.contentWindow.onload=c.onload=function(){var e=setInterval(function(){0<n.body.childNodes.length&&(i(n.documentElement),clearInterval(e),"view"===d.type&&(c.contentWindow.scrollTo(s,l),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.contentWindow.scrollY!==l||c.contentWindow.scrollX!==s)&&(n.documentElement.style.top=-l+"px",n.documentElement.style.left=-s+"px",n.documentElement.style.position="absolute")),t(c))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),o(e,s,l),n.replaceChild(n.adoptNode(p),n.documentElement),n.close()})}},{"./log":13}],3:[function(e,t){function o(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}o.prototype.darken=function(e){var t=1-e;return new o([r(this.r*t),r(this.g*t),r(this.b*t),this.a])},o.prototype.isTransparent=function(){return 0===this.a},o.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},o.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=i(e[0],255),this.g=i(e[1],255),this.b=i(e[2],255),3<e.length&&(this.a=e[3])),Array.isArray(e)};var n=/^#([a-f0-9]{3})$/i;o.prototype.hex3=function(e){var t=null;return null!==(t=e.match(n))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var a=/^#([a-f0-9]{6})$/i;o.prototype.hex6=function(e){var t=null;return null!==(t=e.match(a))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var d=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;o.prototype.rgb=function(e){var t=null;return null!==(t=e.match(d))&&(this.r=+t[1],this.g=+t[2],this.b=+t[3]),null!==t};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;o.prototype.rgba=function(e){var t=null;return null!==(t=e.match(s))&&(this.r=+t[1],this.g=+t[2],this.b=+t[3],this.a=+t[4]),null!==t},o.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},o.prototype.namedColor=function(e){e=e.toLowerCase();var t=l[e];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!t},o.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=o},{}],4:[function(e,t){function r(e,t){var o=k++;if(t=t||{},t.logging&&(y.options.logging=!0,y.options.start=Date.now()),t.async="undefined"==typeof t.async||t.async,t.allowTaint="undefined"!=typeof t.allowTaint&&t.allowTaint,t.removeContainer="undefined"==typeof t.removeContainer||t.removeContainer,t.javascriptEnabled="undefined"!=typeof t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout="undefined"==typeof t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:h,t.strict=!!t.strict,"string"==typeof e){if("string"!=typeof t.proxy)return Promise.reject("Proxy must be used when rendering url");var n=null==t.width?window.innerWidth:t.width,r=null==t.height?window.innerHeight:t.height;return v(g(e),t.proxy,document,n,r,t).then(function(e){return d(e.contentWindow.document.documentElement,e,t,n,r)})}var i=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return i.setAttribute("data-html2canvas-node"+o,o),a(i.ownerDocument,t,i.ownerDocument.defaultView.innerWidth,i.ownerDocument.defaultView.innerHeight,o).then(function(e){return"function"==typeof t.onrendered&&(y("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}function a(e,t,o,n,r){return w(e,e,o,n,t,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(i){y("Document cloned");var a="data-html2canvas-node"+r,s="["+a+"='"+r+"']";e.querySelector(s).removeAttribute(a);var l=i.contentWindow,p=l.document.querySelector(s),c="function"==typeof t.onclone?Promise.resolve(t.onclone(l.document)):Promise.resolve(!0);return c.then(function(){return d(p,i,t,o,n)})})}function d(e,t,o,n,r){var i=t.contentWindow,a=new u(i.document),d=new m(o,a),g=E(e),h="view"===o.type?n:p(i.document),b="view"===o.type?r:c(i.document),x=new o.renderer(h,b,d,o,document),w=new f(e,x,a,d,o);return w.ready.then(function(){y("Finished rendering");var n;return n="view"===o.type?l(x.canvas,{width:x.canvas.width,height:x.canvas.height,top:0,left:0,x:0,y:0}):e===i.document.body||e===i.document.documentElement||null!=o.canvas?x.canvas:l(x.canvas,{width:null==o.width?g.width:o.width,height:null==o.height?g.height:o.height,top:g.top,left:g.left,x:0,y:0}),s(t,o),n})}function s(e,t){t.removeContainer&&(e.parentNode.removeChild(e),y("Cleaned up container"))}function l(e,t){var o=document.createElement("canvas"),r=i(e.width-1,n(0,t.left)),a=i(e.width,n(1,t.left+t.width)),d=i(e.height-1,n(0,t.top)),s=i(e.height,n(1,t.top+t.height));o.width=t.width,o.height=t.height;var l=a-r,p=s-d;return y("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",l,"height:",p),y("Resulting crop with width",t.width,"and height",t.height,"with x",r,"and y",d),o.getContext("2d").drawImage(e,r,d,l,p,t.x,t.y,l,p),o}function p(e){return n(n(e.body.scrollWidth,e.documentElement.scrollWidth),n(e.body.offsetWidth,e.documentElement.offsetWidth),n(e.body.clientWidth,e.documentElement.clientWidth))}function c(e){return n(n(e.body.scrollHeight,e.documentElement.scrollHeight),n(e.body.offsetHeight,e.documentElement.offsetHeight),n(e.body.clientHeight,e.documentElement.clientHeight))}function g(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}var u=e("./support"),h=e("./renderers/canvas"),m=e("./imageloader"),f=e("./nodeparser"),b=e("./nodecontainer"),y=e("./log"),x=e("./utils"),w=e("./clone"),v=e("./proxy").loadUrlDocument,E=x.getBounds,k=0;r.CanvasRenderer=h,r.NodeContainer=b,r.log=y,r.utils=x;var T="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:r;t.exports=T,"function"==typeof o&&o.amd&&o("html2canvas",[],function(){return T})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,t){function o(e){if(this.src=e,n("DummyImageContainer for",e),!this.promise||!this.image){n("Initiating DummyImageContainer"),o.prototype.image=new Image;var t=this.image;o.prototype.promise=new Promise(function(e,o){t.onload=e,t.onerror=o,t.src=r(),!0===t.complete&&e(t)})}}var n=e("./log"),r=e("./utils").smallImage;t.exports=o},{"./log":13,"./utils":26}],6:[function(e,t){var o=e("./utils").smallImage;t.exports=function(e,t){var n,r,i=document.createElement("div"),a=document.createElement("img"),d=document.createElement("span");i.style.visibility="hidden",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),a.src=o(),a.width=1,a.height=1,a.style.margin=0,a.style.padding=0,a.style.verticalAlign="baseline",d.style.fontFamily=e,d.style.fontSize=t,d.style.margin=0,d.style.padding=0,d.appendChild(document.createTextNode("Hidden Text")),i.appendChild(d),i.appendChild(a),n=a.offsetTop-d.offsetTop+1,i.removeChild(d),i.appendChild(document.createTextNode("Hidden Text")),i.style.lineHeight="normal",a.style.verticalAlign="super",r=a.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=n,this.lineWidth=1,this.middle=r}},{"./utils":26}],7:[function(e,t){function o(){this.data={}}var n=e("./font");o.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new n(e,t)),this.data[e+"-"+t]},t.exports=o},{"./font":6}],8:[function(e,t){function o(t,o,n){this.image=null,this.src=t;var i=this,a=r(t);this.promise=(o?new Promise(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(n.proxy,a,n)).then(function(t){var o=e("./core");return o(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(e){return i.image=e})}var n=e("./utils"),r=n.getBounds,i=e("./proxy").loadUrlDocument;o.prototype.proxyLoad=function(e,t,o){var n=this.src;return i(n.src,e,n.ownerDocument,t.width,t.height,o)},t.exports=o},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,t){function o(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}o.TYPES={LINEAR:1,RADIAL:2},o.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,t.exports=o},{}],10:[function(e,t){t.exports=function(e,t){this.src=e,this.image=new Image;var o=this;this.tainted=null,this.promise=new Promise(function(n,r){o.image.onload=n,o.image.onerror=r,t&&(o.image.crossOrigin="anonymous"),o.image.src=e,!0===o.image.complete&&n(o.image)})}},{}],11:[function(e,t){function o(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}var n=e("./log"),r=e("./imagecontainer"),i=e("./dummyimagecontainer"),a=e("./proxyimagecontainer"),d=e("./framecontainer"),s=e("./svgcontainer"),l=e("./svgnodecontainer"),p=e("./lineargradientcontainer"),c=e("./webkitgradientcontainer"),g=e("./utils").bind;o.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}]);}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},o.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},o.prototype.addImage=function(e,t){return function(o){o.args.forEach(function(r){this.imageExists(e,r)||(e.splice(0,0,t.call(this,o)),n("Added image #"+e.length,"string"==typeof r?r.substring(0,100):r))},this)}},o.prototype.hasImageBackground=function(e){return"none"!==e.method},o.prototype.loadImage=function(e){if("url"===e.method){var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new r(t.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),!1):this.isSameOrigin(t)||!0===this.options.allowTaint||this.isSVG(t)?new r(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new r(t,!0):this.options.proxy?new a(t,this.options.proxy):new i(t):new s(t)}return"linear-gradient"===e.method?new p(e):"gradient"===e.method?new c(e):"svg"===e.method?new l(e.args[0],this.support.svg):"IFRAME"===e.method?new d(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new i(e)},o.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||s.prototype.isInline(e)},o.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},o.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},o.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},o.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout)["catch"](function(){var t=new i(e.src);return t.promise.then(function(t){e.image=t})})},o.prototype.get=function(e){var t=null;return this.images.some(function(o){return(t=o).src===e})?t:null},o.prototype.fetch=function(e){return this.images=e.reduce(g(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(t,o){t.promise.then(function(){n("Succesfully loaded image #"+(o+1),t)},function(r){n("Failed loading image #"+(o+1),t,r)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),n("Finished searching images"),this},o.prototype.timeout=function(e,t){var o,r=Promise.race([e.promise,new Promise(function(r,i){o=setTimeout(function(){n("Timed out loading image",e),i(e)},t)})]).then(function(e){return clearTimeout(o),e});return r["catch"](function(){clearTimeout(o)}),r},t.exports=o},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,t){function o(e){n.apply(this,arguments),this.type=n.TYPES.LINEAR;var t=o.REGEXP_DIRECTION.test(e.args[0])||!n.REGEXP_COLORSTOP.test(e.args[0]);t?e.args[0].split(/\s+/).reverse().forEach(function(e,t){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var o=this.y0,n=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=n,this.y1=o;break;case"center":break;default:var r=.01*parseFloat(e,10);if(isNaN(r))break;0===t?(this.y0=r,this.y1=1-this.y0):(this.x0=r,this.x1=1-this.x0);}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(n.REGEXP_COLORSTOP),o=+t[2],i=0===o?"%":t[3];return{color:new r(t[1]),stop:"%"===i?o/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,t){null===e.stop&&this.colorStops.slice(t).some(function(o,n){return null!==o.stop&&(e.stop=(o.stop-this.colorStops[t-1].stop)/(n+1)+this.colorStops[t-1].stop,!0)},this)},this)}var n=e("./gradientcontainer"),r=e("./color");o.prototype=Object.create(n.prototype),o.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,t.exports=o},{"./color":3,"./gradientcontainer":9}],13:[function(e,t){var o=function(){o.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-o.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};o.options={logging:!1},t.exports=o},{}],14:[function(e,t){function o(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function n(e){var t=e.options[e.selectedIndex||0];return t?t.text||"":""}function r(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function i(e){return-1!==e.toString().indexOf("%")}function a(e){return e.replace("px","")}function d(e){return parseFloat(e)}var l=e("./color"),s=e("./utils"),p=s.getBounds,c=s.parseBackgrounds,g=s.offsetBounds;o.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},o.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},o.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},o.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},o.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},o.prototype.prefixedCss=function(e){var t=this.css(e);return void 0===t&&["webkit","moz","ms","o"].some(function(o){return t=this.css(o+e.substr(0,1).toUpperCase()+e.substr(1)),void 0!==t},this),void 0===t?null:t},o.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},o.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},o.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new l(this.css(e)))},o.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},o.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal";}return e},o.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},o.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=c(this.css("backgroundImage")))},o.prototype.cssList=function(e,t){var o=(this.css(e)||"").split(",");return o=o[t||0]||o[0]||"auto",o=o.trim().split(" "),1===o.length&&(o=[o[0],i(o[0])?"auto":o[0]]),o},o.prototype.parseBackgroundSize=function(e,t,o){var n,r,a=this.cssList("backgroundSize",o);if(i(a[0]))n=e.width*parseFloat(a[0])/100;else{if(/contain|cover/.test(a[0])){var d=e.width/e.height,s=t.width/t.height;return d<s^"contain"===a[0]?{width:e.height*s,height:e.height}:{width:e.width,height:e.width/s}}n=parseInt(a[0],10)}return r="auto"===a[0]&&"auto"===a[1]?t.height:"auto"===a[1]?n/t.width*t.height:i(a[1])?e.height*parseFloat(a[1])/100:parseInt(a[1],10),"auto"===a[0]&&(n=r/t.height*t.width),{width:n,height:r}},o.prototype.parseBackgroundPosition=function(e,t,o,n){var r,a,d=this.cssList("backgroundPosition",o);return r=i(d[0])?(e.width-(n||t).width)*(parseFloat(d[0])/100):parseInt(d[0],10),a="auto"===d[1]?r/t.width*t.height:i(d[1])?(e.height-(n||t).height)*parseFloat(d[1])/100:parseInt(d[1],10),"auto"===d[0]&&(r=a/t.height*t.width),{left:r,top:a}},o.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},o.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var o,n=e.match(this.TEXT_SHADOW_PROPERTY),r=0;n&&r<n.length;r++)o=n[r].match(this.TEXT_SHADOW_VALUES),t.push({color:new l(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0});return t},o.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(a).map(d);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},o.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?r(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t?t:[1,0,0,1,0,0]}return this.transformMatrix},o.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?g(this.node):p(this.node))},o.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},o.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=n(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("\u2022")),0===e.length?this.node.placeholder||"":e},o.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,o.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,o.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,o.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,t.exports=o},{"./color":3,"./utils":26}],15:[function(e,t){function o(e,t,o,n,r){j("Starting NodeParser"),this.renderer=t,this.options=r,this.range=null,this.support=o,this.renderQueue=[],this.stack=new J(!0,1,e.ownerDocument,null);var i=new q(e,null);if(r.background&&t.rectangle(0,0,t.width,t.height,new $(r.background)),e===e.ownerDocument.documentElement){var a=new q(i.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,a.color("backgroundColor"))}i.visibile=i.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=M([i].concat(this.getChildren(i)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new Q,j("Fetched nodes, total:",this.nodes.length),j("Calculate overflow clips"),this.calculateOverflowClips(),j("Start fetching images"),this.images=n.fetch(this.nodes.filter(L)),this.ready=this.images.ready.then(Z(function(){return j("Images loaded, starting parsing"),j("Creating stacking contexts"),this.createStackingContexts(),j("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),j("Render queue created with "+this.renderQueue.length+" items"),new Promise(Z(function(e){r.async?"function"==typeof r.async?r.async.call(this,this.renderQueue,e):0<this.renderQueue.length?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function d(e){return e.parent&&e.parent.clip.length}function s(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function l(){}function p(e,t,o,n){return e.map(function(r,i){if(0<r.width){var a=t.left,d=t.top,s=t.width,l=t.height-e[2].width;0===i?(l=e[0].width,r.args=h({c1:[a,d],c2:[a+s,d],c3:[a+s-e[1].width,d+l],c4:[a+e[3].width,d+l]},n[0],n[1],o.topLeftOuter,o.topLeftInner,o.topRightOuter,o.topRightInner)):1===i?(a=t.left+t.width-e[1].width,s=e[1].width,r.args=h({c1:[a+s,d],c2:[a+s,d+l+e[2].width],c3:[a,d+l],c4:[a,d+e[0].width]},n[1],n[2],o.topRightOuter,o.topRightInner,o.bottomRightOuter,o.bottomRightInner)):2===i?(d=d+t.height-e[2].width,l=e[2].width,r.args=h({c1:[a+s,d+l],c2:[a,d+l],c3:[a+e[3].width,d],c4:[a+s-e[3].width,d]},n[2],n[3],o.bottomRightOuter,o.bottomRightInner,o.bottomLeftOuter,o.bottomLeftInner)):3===i?(s=e[3].width,r.args=h({c1:[a,d+l+e[2].width],c2:[a,d],c3:[a+s,d+e[0].width],c4:[a+s,d+l]},n[3],n[0],o.bottomLeftOuter,o.bottomLeftInner,o.topLeftOuter,o.topLeftInner)):void 0}return r})}function c(e,t,o,n){var r=4*((1.4142135623730951-1)/3),i=o*r,a=n*r,d=e+o,s=t+n;return{topLeft:u({x:e,y:s},{x:e,y:s-a},{x:d-i,y:t},{x:d,y:t}),topRight:u({x:e,y:t},{x:e+i,y:t},{x:d,y:s-a},{x:d,y:s}),bottomRight:u({x:d,y:t},{x:d,y:t+a},{x:e+i,y:s},{x:e,y:s}),bottomLeft:u({x:d,y:s},{x:d-i,y:s},{x:e,y:t+a},{x:e,y:t})}}function g(e,t,o){var r=e.left,a=e.top,d=e.width,s=e.height,l=t[0][0]<d/2?t[0][0]:d/2,p=t[0][1]<s/2?t[0][1]:s/2,g=t[1][0]<d/2?t[1][0]:d/2,u=t[1][1]<s/2?t[1][1]:s/2,h=t[2][0]<d/2?t[2][0]:d/2,m=t[2][1]<s/2?t[2][1]:s/2,f=t[3][0]<d/2?t[3][0]:d/2,b=t[3][1]<s/2?t[3][1]:s/2,y=d-g,x=s-m,w=d-h,v=s-b;return{topLeftOuter:c(r,a,l,p).topLeft.subdivide(.5),topLeftInner:c(r+o[3].width,a+o[0].width,n(0,l-o[3].width),n(0,p-o[0].width)).topLeft.subdivide(.5),topRightOuter:c(r+y,a,g,u).topRight.subdivide(.5),topRightInner:c(r+i(y,d+o[3].width),a+o[0].width,y>d+o[3].width?0:g-o[3].width,u-o[0].width).topRight.subdivide(.5),bottomRightOuter:c(r+w,a+x,h,m).bottomRight.subdivide(.5),bottomRightInner:c(r+i(w,d-o[3].width),a+i(x,s+o[0].width),n(0,h-o[1].width),m-o[2].width).bottomRight.subdivide(.5),bottomLeftOuter:c(r,a+v,f,b).bottomLeft.subdivide(.5),bottomLeftInner:c(r+o[3].width,a+v,n(0,f-o[3].width),b-o[2].width).bottomLeft.subdivide(.5)}}function u(e,o,n,r){var i=function(e,o,n){return{x:e.x+(o.x-e.x)*n,y:e.y+(o.y-e.y)*n}};return{start:e,startControl:o,endControl:n,end:r,subdivide:function(a){var t=i(e,o,a),d=i(o,n,a),s=i(n,r,a),l=i(t,d,a),p=i(d,s,a),c=i(l,p,a);return[u(e,t,l,c),u(c,p,s,r)]},curveTo:function(e){e.push(["bezierCurve",o.x,o.y,n.x,n.y,r.x,r.y])},curveToReversed:function(t){t.push(["bezierCurve",n.x,n.y,o.x,o.y,e.x,e.y])}}}function h(e,t,o,n,r,i,a){var d=[];return 0<t[0]||0<t[1]?(d.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(d)):d.push(["line",e.c1[0],e.c1[1]]),0<o[0]||0<o[1]?(d.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(d),d.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(d)):(d.push(["line",e.c2[0],e.c2[1]]),d.push(["line",e.c3[0],e.c3[1]])),0<t[0]||0<t[1]?(d.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(d)):d.push(["line",e.c4[0],e.c4[1]]),d}function m(e,t,o,n,r,i,a){0<t[0]||0<t[1]?(e.push(["line",n[0].start.x,n[0].start.y]),n[0].curveTo(e),n[1].curveTo(e)):e.push(["line",i,a]),(0<o[0]||0<o[1])&&e.push(["line",r[0].start.x,r[0].start.y])}function f(e){return 0>e.cssInt("zIndex")}function b(e){return 0<e.cssInt("zIndex")}function y(e){return 0===e.cssInt("zIndex")}function x(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function w(e){return e instanceof J}function v(e){return 0<e.node.data.trim().length}function E(e){return /^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function k(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var o=e.css("border"+t+"Radius"),n=o.split(" ");return 1>=n.length&&(n[1]=n[0]),n.map(B)})}function T(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function C(e){var t=e.css("position"),o=-1===["absolute","relative","fixed"].indexOf(t)?"auto":e.css("zIndex");return"auto"!==o}function S(e){return"static"!==e.css("position")}function _(e){return"none"!==e.css("float")}function N(e){return-1!==["inline-block","inline-table"].indexOf(e.css("display"))}function I(e){var t=this;return function(){return!e.apply(t,arguments)}}function L(e){return e.node.nodeType===Node.ELEMENT_NODE}function A(e){return!0===e.isPseudoElement}function D(e){return e.node.nodeType===Node.TEXT_NODE}function O(e){return function(t,o){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(o.cssInt("zIndex")+e.indexOf(o)/e.length)}}function R(e){return 1>e.getOpacity()}function B(e){return parseInt(e,10)}function z(e){return e.width}function P(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function M(e){return[].concat.apply([],e)}function H(e){var t=e.substr(0,1);return t===e.substr(e.length-1)&&t.match(/'|"/)?e.substr(1,e.length-2):e}function F(e){for(var t,o=[],n=0,r=!1;e.length;)W(e[n])===r?(t=e.splice(0,n),t.length&&o.push(X.ucs2.encode(t)),r=!r,n=0):n++,n>=e.length&&(t=e.splice(0,n),t.length&&o.push(X.ucs2.encode(t)));return o}function W(e){return-1!==[32,13,10,9,45].indexOf(e)}function U(e){return /[^\u0000-\u00ff]/.test(e)}var V=Math.ceil,j=e("./log"),X=e("punycode"),q=e("./nodecontainer"),G=e("./textcontainer"),Y=e("./pseudoelementcontainer"),Q=e("./fontmetrics"),$=e("./color"),J=e("./stackingcontext"),K=e("./utils"),Z=K.bind,ee=K.getBounds,te=K.parseBackgrounds,oe=K.offsetBounds;o.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(L(e)){A(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],o=e.parseClip();o&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&t.push([["rect",e.bounds.left+o.left,e.bounds.top+o.top,o.right-o.left,o.bottom-o.top]]),e.clip=d(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"===e.css("overflow")?e.clip:e.clip.concat([e.borders.clip]),A(e)&&e.cleanDOM()}else D(e)&&(e.clip=d(e)?e.parent.clip:[]);A(e)||(e.bounds=null)},this)},o.prototype.asyncRenderer=function(e,t,o){o=o||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():o+20>Date.now()?this.asyncRenderer(e,t,o):setTimeout(Z(function(){this.asyncRenderer(e,t)},this),0)},o.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+Y.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+":before { content: \"\" !important; display: none !important; }."+Y.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+":after { content: \"\" !important; display: none !important; }")},o.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},o.prototype.createStyles=function(e,t){var o=e.createElement("style");o.innerHTML=t,e.body.appendChild(o)},o.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var o=this.getPseudoElement(e,":before"),n=this.getPseudoElement(e,":after");o&&t.push(o),n&&t.push(n)}return M(t)},o.prototype.getPseudoElement=function(e,t){var o=e.computedStyle(t);if(!o||!o.content||"none"===o.content||"-moz-alt-content"===o.content||"none"===o.display)return null;for(var n,r=H(o.content),a="url"===r.substr(0,3),d=document.createElement(a?"img":"html2canvaspseudoelement"),l=new Y(d,e,t),p=o.length-1;0<=p;p--)n=s(o.item(p)),d.style[n]=o[n];if(d.className=Y.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+Y.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,a)return d.src=te(r)[0].args[0],[l];var c=document.createTextNode(r);return d.appendChild(c),[l,new G(c,l)]},o.prototype.getChildren=function(e){return M([].filter.call(e.node.childNodes,T).map(function(t){var o=[t.nodeType===Node.TEXT_NODE?new G(t,e):new q(t,e)].filter(P);return t.nodeType===Node.ELEMENT_NODE&&o.length&&"TEXTAREA"!==t.tagName?o[0].isElementVisible()?o.concat(this.getChildren(o[0])):[]:o},this))},o.prototype.newStackingContext=function(e,t){var o=new J(t,e.getOpacity(),e.node,e.parent);e.cloneTo(o);var n=t?o.getParentStack(this):o.parent.stack;n.contexts.push(o),e.stack=o},o.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){L(e)&&(this.isRootElement(e)||R(e)||C(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):L(e)&&(S(e)&&y(e)||N(e)||_(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},o.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},o.prototype.isRootElement=function(e){return null===e.parent},o.prototype.sortStackingContexts=function(e){e.contexts.sort(O(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},o.prototype.parseTextBounds=function(e){return function(t,o,n){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var r=n.slice(0,o).join("").length;return this.getRangeBounds(e.node,r,t.length)}if(e.node&&"string"==typeof e.node.data){var i=e.node.splitText(t.length),a=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=i,a}}else(!this.support.rangeBounds||e.parent.hasTransform())&&(e.node=e.node.splitText(t.length));return{}}},o.prototype.getWrapperBounds=function(e,t){var o=e.ownerDocument.createElement("html2canvaswrapper"),n=e.parentNode,r=e.cloneNode(!0);o.appendChild(e.cloneNode(!0)),n.replaceChild(o,e);var i=t?oe(o):ee(o);return n.replaceChild(r,o),i},o.prototype.getRangeBounds=function(e,t,o){var n=this.range||(this.range=e.ownerDocument.createRange());return n.setStart(e,t),n.setEnd(e,t+o),n.getBoundingClientRect()},o.prototype.parse=function(e){var t=e.contexts.filter(f),o=e.children.filter(L),n=o.filter(I(_)),r=n.filter(I(S)).filter(I(x)),i=o.filter(I(S)).filter(_),a=n.filter(I(S)).filter(x),d=e.contexts.concat(n.filter(S)).filter(y),s=e.children.filter(D).filter(v),p=e.contexts.filter(b);t.concat(r).concat(i).concat(a).concat(d).concat(s).concat(p).forEach(function(e){this.renderQueue.push(e),w(e)&&(this.parse(e),this.renderQueue.push(new l))},this)},o.prototype.paint=function(e){try{e instanceof l?this.renderer.ctx.restore():D(e)?(A(e.parent)&&e.parent.appendToDOM(),this.paintText(e),A(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(t){if(j(t),this.options.strict)throw t}},o.prototype.paintNode=function(e){w(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},o.prototype.paintElement=function(e){var t=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,t,e.borders.borders.map(z))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var o=this.images.get(e.node);o?this.renderer.renderImage(e,t,e.borders,o):j("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var n=this.images.get(e.node.src);n?this.renderer.renderImage(e,t,e.borders,n):j("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,t,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e);}},this)},o.prototype.paintCheckbox=function(e){var t=e.parseBounds(),o=i(t.width,t.height),n={width:o-1,height:o-1,top:t.top,left:t.left},a=[3,3],r=[a,a,a,a],d=[1,1,1,1].map(function(e){return{color:new $("#A5A5A5"),width:e}}),s=g(n,r,d);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(n.left+1,n.top+1,n.width-2,n.height-2,new $("#DEDEDE")),this.renderer.renderBorders(p(d,n,s,r)),e.node.checked&&(this.renderer.font(new $("#424242"),"normal","normal","bold",o-3+"px","arial"),this.renderer.text("\u2714",n.left+o/6,n.top+o-1))},this)},o.prototype.paintRadio=function(e){var t=e.parseBounds(),o=i(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,o,new $("#DEDEDE"),1,new $("#A5A5A5")),e.node.checked&&this.renderer.circle(V(t.left+o/4)+1,V(t.top+o/4)+1,a(o/2),new $("#424242"))},this)},o.prototype.paintFormValue=function(e){var t=e.getValue();if(0<t.length){var o=e.node.ownerDocument,n=o.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{n.style[t]=e.css(t)}catch(t){j("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var r=e.parseBounds();n.style.position="fixed",n.style.left=r.left+"px",n.style.top=r.top+"px",n.textContent=t,o.body.appendChild(n),this.paintText(new G(n.firstChild,e)),o.body.removeChild(n)}},o.prototype.paintText=function(e){e.applyTextTransform();var t=X.ucs2.decode(e.node.data),o=this.options.letterRendering&&!E(e)||U(e.node.data)?t.map(function(e){return X.ucs2.encode([e])}):F(t),n=e.parent.fontWeight(),r=e.parent.css("fontSize"),i=e.parent.css("fontFamily"),a=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),n,r,i),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){o.map(this.parseTextBounds(e),this).forEach(function(t,n){t&&(this.renderer.text(o[n],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(i,r)))},this)},this)},o.prototype.renderTextDecoration=function(e,t,o){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,r(t.top+o.baseline+o.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,r(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,V(t.top+o.middle+o.lineWidth),t.width,1,e.color("color"));}};var ne={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};o.prototype.parseBorders=function(e){var t=e.parseBounds(),o=k(e),n=["Top","Right","Bottom","Left"].map(function(t,o){var n=e.css("border"+t+"Style"),r=e.color("border"+t+"Color");"inset"===n&&r.isBlack()&&(r=new $([255,255,255,r.a]));var i=ne[n]?ne[n][o]:null;return{width:e.cssInt("border"+t+"Width"),color:i?r[i[0]](i[1]):r,args:null}}),r=g(t,o,n);return{clip:this.parseBackgroundClip(e,r,n,o,t),borders:p(n,t,r,o)}},o.prototype.parseBackgroundClip=function(e,t,o,n,r){var i=e.css("backgroundClip"),a=[];switch(i){case"content-box":case"padding-box":m(a,n[0],n[1],t.topLeftInner,t.topRightInner,r.left+o[3].width,r.top+o[0].width),m(a,n[1],n[2],t.topRightInner,t.bottomRightInner,r.left+r.width-o[1].width,r.top+o[0].width),m(a,n[2],n[3],t.bottomRightInner,t.bottomLeftInner,r.left+r.width-o[1].width,r.top+r.height-o[2].width),m(a,n[3],n[0],t.bottomLeftInner,t.topLeftInner,r.left+o[3].width,r.top+r.height-o[2].width);break;default:m(a,n[0],n[1],t.topLeftOuter,t.topRightOuter,r.left,r.top),m(a,n[1],n[2],t.topRightOuter,t.bottomRightOuter,r.left+r.width,r.top),m(a,n[2],n[3],t.bottomRightOuter,t.bottomLeftOuter,r.left+r.width,r.top+r.height),m(a,n[3],n[0],t.bottomLeftOuter,t.topLeftOuter,r.left,r.top+r.height);}return a},t.exports=o},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,t,o){function n(e,t,o){var n="withCredentials"in new XMLHttpRequest;if(!t)return Promise.reject("No proxy configured");var r=d(n),i=s(t,e,r);return n?p(i):a(o,i,r).then(function(e){return h(e.content)})}function i(e,t,o){var n="crossOrigin"in new Image,r=d(n),i=s(t,e,r);return n?Promise.resolve(i):a(o,i,r).then(function(e){return"data:"+e.type+";base64,"+e.content})}function a(e,t,o){return new Promise(function(n,r){var i=e.createElement("script"),a=function(){delete window.html2canvas.proxy[o],e.body.removeChild(i)};window.html2canvas.proxy[o]=function(e){a(),n(e)},i.src=t,i.onerror=function(t){a(),r(t)},e.body.appendChild(i)})}function d(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++m+"_"+r(1e5*Math.random())}function s(e,t,o){return e+"?url="+encodeURIComponent(t)+(o.length?"&callback=html2canvas.proxy."+o:"")}function l(e){return function(t){var o,n=new DOMParser;try{o=n.parseFromString(t,"text/html")}catch(n){g("DOMParser not supported, falling back to createHTMLDocument"),o=document.implementation.createHTMLDocument("");try{o.open(),o.write(t),o.close()}catch(e){g("createHTMLDocument write not supported, falling back to document.body.innerHTML"),o.body.innerHTML=t}}var r=o.querySelector("base");if(!r||!r.href.host){var i=o.createElement("base");i.href=e,o.head.insertBefore(i,o.head.firstChild)}return o}}var p=e("./xhr"),c=e("./utils"),g=e("./log"),u=e("./clone"),h=c.decode64,m=0;o.Proxy=n,o.ProxyURL=i,o.loadUrlDocument=function(e,t,o,r,i,a){return new n(e,t,window.document).then(l(e)).then(function(e){return u(e,o,r,i,a,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,t){var o=e("./proxy").ProxyURL;t.exports=function(e,t){var n=document.createElement("a");n.href=e,e=n.href,this.src=e,this.image=new Image;var r=this;this.promise=new Promise(function(n,i){r.image.crossOrigin="Anonymous",r.image.onload=n,r.image.onerror=i,new o(e,t,document).then(function(e){r.image.src=e})["catch"](i)})}},{"./proxy":16}],18:[function(e,t){function o(e,t,o){n.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===o}var n=e("./nodecontainer");o.prototype.cloneTo=function(e){o.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},o.prototype=Object.create(n.prototype),o.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},o.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},o.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},o.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",o.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",t.exports=o},{"./nodecontainer":14}],19:[function(e,t){function o(e,t,o,n,r){this.width=e,this.height=t,this.images=o,this.options=n,this.document=r}var n=e("./log");o.prototype.renderImage=function(e,t,o,n){var r=e.cssInt("paddingLeft"),i=e.cssInt("paddingTop"),a=e.cssInt("paddingRight"),d=e.cssInt("paddingBottom"),s=o.borders,l=t.width-(s[1].width+s[3].width+r+a),p=t.height-(s[0].width+s[2].width+i+d);this.drawImage(n,0,0,n.image.width||l,n.image.height||p,t.left+r+s[3].width,t.top+i+s[0].width,l,p)},o.prototype.renderBackground=function(e,t,o){0<t.height&&0<t.width&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,o))},o.prototype.renderBackgroundColor=function(e,t){var o=e.color("backgroundColor");o.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,o)},o.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},o.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},o.prototype.renderBackgroundImage=function(e,t,o){var r=e.parseBackgroundImages();r.reverse().forEach(function(r,i,a){switch(r.method){case"url":var d=this.images.get(r.args[0]);d?this.renderBackgroundRepeating(e,t,d,a.length-(i+1),o):n("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var s=this.images.get(r.value);s?this.renderBackgroundGradient(s,t,o):n("Error loading background-image",r.args[0]);break;case"none":break;default:n("Unknown background-image type",r.args[0]);}},this)},o.prototype.renderBackgroundRepeating=function(e,t,o,n,r){var i=e.parseBackgroundSize(t,o.image,n),a=e.parseBackgroundPosition(t,o.image,n,i),d=e.parseBackgroundRepeat(n);switch(d){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(o,a,i,t,t.left+r[3],t.top+a.top+r[0],99999,i.height,r);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(o,a,i,t,t.left+a.left+r[3],t.top+r[0],i.width,99999,r);break;case"no-repeat":this.backgroundRepeatShape(o,a,i,t,t.left+a.left+r[3],t.top+a.top+r[0],i.width,i.height,r);break;default:this.renderBackgroundRepeat(o,a,i,{top:t.top,left:t.left},r[3],r[0]);}},t.exports=o},{"./log":13}],20:[function(e,t){function o(e,t){i.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},d("Initialized CanvasRenderer with size",e,"x",t)}function n(e){return 0<e.length}var i=e("../renderer"),a=e("../lineargradientcontainer"),d=e("../log");o.prototype=Object.create(i.prototype),o.prototype.setFillStyle=function(e){return this.ctx.fillStyle="object"==typeof e&&e.isColor?e.toString():e,this.ctx},o.prototype.rectangle=function(e,t,o,n,r){this.setFillStyle(r).fillRect(e,t,o,n)},o.prototype.circle=function(e,t,o,n){this.setFillStyle(n),this.ctx.beginPath(),this.ctx.arc(e+o/2,t+o/2,o/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},o.prototype.circleStroke=function(e,t,o,n,r,i){this.circle(e,t,o,n),this.ctx.strokeStyle=i.toString(),this.ctx.stroke()},o.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},o.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(o){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},o.prototype.drawImage=function(e,t,o,n,r,i,a,d,s){(!this.taints(e)||this.options.allowTaint)&&this.ctx.drawImage(e.image,t,o,n,r,i,a,d,s)},o.prototype.clip=function(e,t,o){this.ctx.save(),e.filter(n).forEach(function(e){this.shape(e).clip()},this),t.call(o),this.ctx.restore()},o.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},o.prototype.font=function(e,t,o,n,r,i){this.setFillStyle(e).font=[t,o,n,r,i].join(" ").split(",")[0]},o.prototype.fontShadow=function(e,t,o,n){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",o).setVariable("shadowBlur",n)},o.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},o.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},o.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},o.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),this},o.prototype.text=function(e,t,o){this.ctx.fillText(e,t,o)},o.prototype.backgroundRepeatShape=function(e,t,o,n,i,a,d,s,l){var p=[["line",r(i),r(a)],["line",r(i+d),r(a)],["line",r(i+d),r(s+a)],["line",r(i),r(s+a)]];this.clip([p],function(){this.renderBackgroundRepeat(e,t,o,n,l[3],l[0])},this)},o.prototype.renderBackgroundRepeat=function(e,t,o,n,i,a){var d=r(n.left+t.left+i),s=r(n.top+t.top+a);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,o),"repeat")),this.ctx.translate(d,s),this.ctx.fill(),this.ctx.translate(-d,-s)},o.prototype.renderBackgroundGradient=function(e,t){if(e instanceof a){var o=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){o.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,o)}},o.prototype.resizeImage=function(e,t){var o=e.image;if(o.width===t.width&&o.height===t.height)return o;var n,r=document.createElement("canvas");return r.width=t.width,r.height=t.height,n=r.getContext("2d"),n.drawImage(o,0,0,o.width,o.height,0,0,t.width,t.height),r},t.exports=o},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,t){function o(e,t,o,r){n.call(this,o,r),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var n=e("./nodecontainer");o.prototype=Object.create(n.prototype),o.prototype.getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},t.exports=o},{"./nodecontainer":14}],22:[function(e,t){function o(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}o.prototype.testRangeBounds=function(e){var t,o,n,r,i=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(o=e.createElement("boundtest"),o.style.height="123px",o.style.display="block",e.body.appendChild(o),t.selectNode(o),n=t.getBoundingClientRect(),r=n.height,123===r&&(i=!0),e.body.removeChild(o))),i},o.prototype.testCORS=function(){return"undefined"!=typeof new Image().crossOrigin},o.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),o=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{o.drawImage(e,0,0),t.toDataURL()}catch(t){return!1}return!0},t.exports=o},{}],23:[function(e,t){function o(e){this.src=e,this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(e)?Promise.resolve(t.inlineFormatting(e)):n(e)}).then(function(e){return new Promise(function(o){window.html2canvas.svg.fabric.loadSVGFromString(e,t.createCanvas.call(t,o))})})}var n=e("./xhr"),r=e("./utils").decode64;o.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},o.prototype.inlineFormatting=function(e){return /^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},o.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},o.prototype.isInline=function(e){return /^data:image\/svg\+xml/i.test(e)},o.prototype.createCanvas=function(e){var t=this;return function(o,n){var r=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=r.lowerCanvasEl,r.setWidth(n.width).setHeight(n.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(o,n)).renderAll(),e(r.lowerCanvasEl)}},o.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):r(e)},t.exports=o},{"./utils":26,"./xhr":28}],24:[function(e,t){function o(e,t){this.src=e,this.image=null;var o=this;this.promise=t?new Promise(function(t,n){o.image=new Image,o.image.onload=t,o.image.onerror=n,o.image.src="data:image/svg+xml,"+new XMLSerializer().serializeToString(e),!0===o.image.complete&&t(o.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(e,o.createCanvas.call(o,t))})})}var n=e("./svgcontainer");o.prototype=Object.create(n.prototype),t.exports=o},{"./svgcontainer":23}],25:[function(e,t){function o(e,t){r.call(this,e,t)}function n(e,t,o){if(0<e.length)return t+o.toUpperCase()}var r=e("./nodecontainer");o.prototype=Object.create(r.prototype),o.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},o.prototype.transform=function(e){var t=this.node.data;return"lowercase"===e?t.toLowerCase():"capitalize"===e?t.replace(/(^|\s|:|-|\(|\))([a-z])/g,n):"uppercase"===e?t.toUpperCase():t},t.exports=o},{"./nodecontainer":14}],26:[function(t,o,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(e,t){return function(){return e.apply(t,arguments)}},n.decode64=function(t){var o,n,r,a,d,s,l,p,c=t.length,g="";for(o=0;o<c;o+=4)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t[o]),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t[o+1]),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t[o+2]),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t[o+3]),s=n<<2|r>>4,l=(15&r)<<4|a>>2,p=(3&a)<<6|d,g+=64===a?e(s):64===d||-1===d?e(s,l):e(s,l,p);return g},n.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),o=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+o,left:t.left,width:o,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},n.offsetBounds=function(e){var t=e.offsetParent?n.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,right:e.offsetLeft+t.left+e.offsetWidth,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},n.parseBackgrounds=function(e){var t,o,n,r,i,a,d,s=[],l=0,p=0,g=function(){t&&("\""===o.substr(0,1)&&(o=o.substr(1,o.length-2)),o&&d.push(o),"-"===t.substr(0,1)&&0<(r=t.indexOf("-",1)+1)&&(n=t.substr(0,r),t=t.substr(r)),s.push({prefix:n,method:t.toLowerCase(),value:i,args:d,image:null})),d=[],t=n=o=i=""};return d=[],t=n=o=i="",e.split("").forEach(function(e){if(!(0==l&&-1<" \r\n\t".indexOf(e))){switch(e){case"\"":a?a===e&&(a=null):a=e;break;case"(":if(a)break;else{if(0==l)return l=1,void(i+=e);p++}break;case")":if(a)break;else if(1==l){if(0==p)return l=0,i+=e,void g();p--}break;case",":if(a)break;else{if(0==l)return void g();if(1==l&&0==p&&!t.match(/^url$/i))return d.push(o),o="",void(i+=e)}}i+=e,0==l?t+=e:o+=e}}),g(),s}},{}],27:[function(e,t){function o(e){n.apply(this,arguments),this.type="linear"===e.args[0]?n.TYPES.LINEAR:n.TYPES.RADIAL}var n=e("./gradientcontainer");o.prototype=Object.create(n.prototype),t.exports=o},{"./gradientcontainer":9}],28:[function(e,t){t.exports=function(e){return new Promise(function(t,o){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){200===n.status?t(n.responseText):o(new Error(n.statusText))},n.onerror=function(){o(new Error("Network Error"))},n.send()})}},{}]},{},[4])(4)});var r=function(){"use strict";function e(){return _++}function t(){_=1}function o(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).reduce(function(e,t){return e+=t.cssText},""):null}catch(e){return null}}function n(e){var t;return t=-1<e.indexOf("//")?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}function r(e,t){return e.replace(N,function(e,o,r,i){var a=o||r||i;if(!I.test(a))return"url('"+a+"')";if(L.test(a))return"url("+a+")";if("/"===a[0])return"url('"+(n(t)+a)+"')";var d=t.split("/"),s=a.split("/");d.pop();for(var l,p=0,c=s;p<c.length;p++)if(l=c[p],"."===l)continue;else".."===l?d.pop():d.push(l);return"url('"+d.join("/")+"')"})}function i(e,t){var o=e.createElement("a");return o.href=t,o.href}function a(e){return"svg"===e.tagName||e instanceof SVGElement}function d(e,t){switch(e.nodeType){case e.DOCUMENT_NODE:return{type:T.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:T.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId};case e.ELEMENT_NODE:for(var n=e.classList.contains("rr-block"),d=e.tagName.toLowerCase(),s={},l=0,p=Array.from(e.attributes);l<p.length;l++){var c=p[l],g=c.name,u=c.value;s[g]="src"===g||"href"===g?i(t,u):"style"===g?r(u,location.href):u}if("link"===d){var h=Array.from(t.styleSheets).find(function(t){return t.href===e.href}),m=o(h);m&&(s={_cssText:r(m,h.href)})}if("input"===d||"textarea"===d||"select"===d){var u=e.value;"radio"!==s.type&&"checkbox"!==s.type&&u?s.value=u:e.checked&&(s.checked=e.checked)}if("option"===d){var f=e.parentElement;s.value===f.value&&(s.selected=e.selected)}if(n){var b=e.getBoundingClientRect(),y=b.width,x=b.height;s.rr_width=y+"px",s.rr_height=x+"px"}return{type:T.Element,tagName:d,attributes:s,childNodes:[],isSVG:a(e)||void 0,needBlock:n};case e.TEXT_NODE:var w=e.parentNode&&e.parentNode.tagName,v=e.textContent,E="STYLE"===w||void 0;return E&&v&&(v=r(v,location.href)),"SCRIPT"===w&&(v="SCRIPT_PLACEHOLDER"),{type:T.Text,textContent:v||"",isStyle:E};case e.CDATA_SECTION_NODE:return{type:T.CDATA,textContent:""};case e.COMMENT_NODE:return{type:T.Comment,textContent:e.textContent||""};default:return!1;}}function s(t,o,n,r){void 0===r&&(r=!1);var i=d(t,o);if(!i)return console.warn(t,"not serialized"),null;var a=Object.assign(i,{id:e()});t.__sn=a,n[a.id]=t;var l=!r;if(a.type===T.Element&&(l=l&&!a.needBlock,delete a.needBlock),(a.type===T.Document||a.type===T.Element)&&l)for(var p=0,c=Array.from(t.childNodes);p<c.length;p++){var g=c[p],u=s(g,o,n);u&&a.childNodes.push(u)}return a}function l(e){t();var o={};return[s(e,e,o),o]}function p(e,t,o){void 0===o&&(o=document);var n={capture:!0,passive:!0};return o.addEventListener(e,t,n),function(){return o.removeEventListener(e,t,n)}}function c(e,t,o){void 0===o&&(o={});var n=null,r=0;return function(){var i=Date.now();r||!1!==o.leading||(r=i);var a=t-(i-r),d=this,s=arguments;0>=a||a>t?(n&&(window.clearTimeout(n),n=null),r=i,e.apply(d,s)):!n&&!1!==o.trailing&&(n=window.setTimeout(function(){r=!1===o.leading?0:Date.now(),n=null,e.apply(d,s)},a))}}function g(e,t,o){var n=Object.getOwnPropertyDescriptor(e,t);return Object.defineProperty(e,t,{set:function(e){var t=this;setTimeout(function(){o.set.call(t,e)},0),n&&n.set&&n.set.call(this,e)}}),function(){return g(e,t,n||{})}}function u(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function h(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function m(e){return!!e&&(e.nodeType===e.ELEMENT_NODE?e.classList.contains("rr-block")||m(e.parentNode):m(e.parentNode))}function f(e){var t=new MutationObserver(function(t){var o=[],n=[],r=[],i=[],a=[],d=new Set,l=function(e){m(e)||(d.add(e),e.childNodes.forEach(function(e){return l(e)}))};t.forEach(function(e){var t=e.type,i=e.target,s=e.oldValue,p=e.addedNodes,c=e.removedNodes,g=e.attributeName;switch(t){case"characterData":{var u=i.textContent;m(i)||u===s||o.push({value:u,node:i});break}case"attributes":{var u=i.getAttribute(g);if(m(i)||u===s)return;var h=n.find(function(e){return e.node===i});h||(h={node:i,attributes:{}},n.push(h)),h.attributes[g]=u;break}case"childList":{p.forEach(function(e){return l(e)}),c.forEach(function(e){if(!m(e)){if(d.has(e))d["delete"](e),a.push(e);else if(d.has(i)&&!A.getId(e));else r.push({parentId:A.getId(i),id:A.getId(e)});A.removeNodeFromMap(e)}});break}default:}}),r=r.map(function(e){return e.parentNode&&(e.parentId=A.getId(e.parentNode),delete e.parentNode),e});var p=function(e){var t=e.parentNode;return!!t&&(!!a.some(function(e){return e===t})||p(t))},c=function(e){var t=e.parentNode;if(!t)return!1;var o=A.getId(t);return!!r.some(function(e){return e.id===o})||c(t)};Array.from(d).forEach(function(e){p(e)||c(e)?a.push(e):i.push({parentId:A.getId(e.parentNode),previousId:e.previousSibling?A.getId(e.previousSibling):e.previousSibling,nextId:e.nextSibling?A.getId(e.nextSibling):e.nextSibling,node:s(e,document,A.map,!0)})});var g={texts:o.map(function(e){return{id:A.getId(e.node),value:e.value}}).filter(function(e){return A.has(e.id)}),attributes:n.map(function(e){return{id:A.getId(e.node),attributes:e.attributes}}).filter(function(e){return A.has(e.id)}),removes:r,adds:i};(g.texts.length||g.attributes.length||g.removes.length||g.adds.length)&&e(g)});return t.observe(document,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),t}function b(e){var t,o=[],n=c(function(){var n=Date.now()-t;e(o.map(function(e){return e.timeOffset-=n,e})),o=[],t=null},500),r=c(function(e){var r=e.clientX,i=e.clientY,a=e.target;t||(t=Date.now()),o.push({x:r,y:i,id:A.getId(a),timeOffset:Date.now()-t}),n()},20,{trailing:!1});return p("mousemove",r)}function y(e){var t=[],o=function(t){return function(o){if(!m(o.target)){var n=A.getId(o.target),r=o.clientX,i=o.clientY;e({type:O[t],id:n,x:r,y:i})}}};return Object.keys(O).filter(function(e){return Number.isNaN(+e)}).forEach(function(e){var n=e.toLowerCase(),r=o(e);t.push(p(n,r))}),function(){t.forEach(function(e){return e()})}}function x(e){var t=c(function(t){if(t.target&&!m(t.target)){var o=A.getId(t.target);if(t.target===document){var n=document.scrollingElement||document.documentElement;e({id:o,x:n.scrollLeft,y:n.scrollTop})}else e({id:o,x:t.target.scrollLeft,y:t.target.scrollTop})}},100);return p("scroll",t)}function w(e){var t=c(function(){var t=u(),o=h();e({width:+o,height:+t})},200);return p("resize",t,window)}function v(e){function t(e){var t=e.target;if(t&&t.tagName&&!(0>R.indexOf(t.tagName))&&!m(t)){var n=t.type;if(!("password"===n||t.classList.contains("rr-ignore"))){var r=t.value,i=!1;("radio"===n||"checkbox"===n)&&(i=t.checked),o(t,{text:r,isChecked:i});var a=t.name;"radio"===n&&a&&i&&document.querySelectorAll("input[type=\"radio\"][name=\""+a+"\"]").forEach(function(e){e!==t&&o(e,{text:e.value,isChecked:!i})})}}}function o(t,o){var n=z.get(t);if(!n||n.text!==o.text||n.isChecked!==o.isChecked){z.set(t,o);var r=A.getId(t);e(C({},o,{id:r}))}}var n=["input","change"].map(function(e){return p(e,t)}),r=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");return r&&r.set&&n.push.apply(n,B.map(function(e){return g(e[0],e[1],{set:function(){t({target:this})}})})),function(){n.forEach(function(e){return e()})}}function E(e){var t=f(e.mutationCb),o=b(e.mousemoveCb),n=y(e.mouseInteractionCb),r=x(e.scrollCb),i=w(e.viewportResizeCb),a=v(e.inputCb);return function(){t.disconnect(),o(),n(),r(),i(),a()}}function k(t){return C({},t,{timestamp:Date.now()})}var T,C=function(){return C=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},C.apply(this,arguments)};(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(T||(T={}));var S,_=1,N=/url\((?:'([^']*)'|"([^"]*)"|([^)]*))\)/gm,I=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,L=/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi,A={map:{},getId:function(e){return e.__sn?e.__sn.id:-1},getNode:function(e){return A.map[e]||null},removeNodeFromMap:function(e){var t=e.__sn&&e.__sn.id;delete A.map[t],e.childNodes&&e.childNodes.forEach(function(e){return A.removeNodeFromMap(e)})},has:function(e){return A.map.hasOwnProperty(e)}};(function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta"})(S||(S={}));var D;(function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input"})(D||(D={}));var O;(function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove=8]="TouchMove",e[e.TouchEnd=9]="TouchEnd"})(O||(O={}));var R=["INPUT","TEXTAREA","SELECT"],B=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"]],z=new WeakMap;return function(e){function t(e){void 0===e&&(e=!1),s(k({type:S.Meta,data:{href:window.location.href,width:h(),height:u()}}),e);var t=l(document),o=t[0],n=t[1];return o?void(A.map=n,s(k({type:S.FullSnapshot,data:{node:o,initialOffset:{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}}}))):console.warn("Failed to snapshot the document")}void 0===e&&(e={});var o=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth;if(!o)throw new Error("emit function is required");var i,a=0,s=function(d,e){if(o(d,e),d.type===S.FullSnapshot)i=d,a=0;else if(d.type===S.IncrementalSnapshot){a++;var s=r&&a>=r,l=n&&d.timestamp-i.timestamp>n;(s||l)&&t(!0)}};try{var d=[p("DOMContentLoaded",function(){s(k({type:S.DomContentLoaded,data:{}}))})],c=function(){t(),d.push(E({mutationCb:function(e){return s(k({type:S.IncrementalSnapshot,data:C({source:D.Mutation},e)}))},mousemoveCb:function(e){return s(k({type:S.IncrementalSnapshot,data:{source:D.MouseMove,positions:e}}))},mouseInteractionCb:function(e){return s(k({type:S.IncrementalSnapshot,data:C({source:D.MouseInteraction},e)}))},scrollCb:function(e){return s(k({type:S.IncrementalSnapshot,data:C({source:D.Scroll},e)}))},viewportResizeCb:function(e){return s(k({type:S.IncrementalSnapshot,data:C({source:D.ViewportResize},e)}))},inputCb:function(e){return s(k({type:S.IncrementalSnapshot,data:C({source:D.Input},e)}))}}))};return"interactive"===document.readyState||"complete"===document.readyState?c():d.push(p("load",function(){s(k({type:S.Load,data:{}})),c()},window)),function(){d.forEach(function(e){return e()})}}catch(e){console.warn(e)}}}();this.JST=this.JST||{},this.JST["view/widget.html"]=function(e){var t,n="",r=o.escape,i=Array.prototype.join;return n+="<a href=\"#\" id=\"bugira-button\">\n\t\t"+(null==(t=e.label_button)?"":t)+"\n</a>\n\n<div id=\"bugira_widget_screenshot_selection_area\" style=\"display: none\"></div>\n<div class=\"bugira-dialog rr-ignore\">\n\n\t<div class=\"chat\" style=\"display: none\">\n\t\t<h3>Support Chat</h3>\n\n\t\t<div id=\"bugira-support-chat\" class=\"bugira-chat\">\n\t\t</div>\n\n\t\t<button id=\"bugira_widget_end_chat\">Finish Chat</button>\n\t</div>\n\n\t<form action=\""+(null==(t=e.url)?"":t)+"\" method=\"post\" id=\"bugira-form\"  target=\"bugiraRemoteFrame\">\n\n\t\t<input type=\"hidden\" id=\"bugira_widget_reporter_history\" name=\"report[history]\" value=\"\">\n\t\t<input type=\"hidden\" id=\"bugira_widget_reporter_window\" name=\"report[window]\" value=\"\">\n\t\t<input type=\"hidden\" id=\"bugira_widget_reporter_resolution\" name=\"report[resolution]\" value=\"\">\n\t\t<input type=\"hidden\" id=\"bugira_widget_reporter_snapshot\" name=\"snapshot\" value=\"\">\n\t\t<input type=\"hidden\" id=\"bugira_widget_reporter_screenshot\" name=\"screenshot\" value=\"\">\n\t\t<input type=\"hidden\" id=\"bugira_widget_reporter_selection\" name=\"selection\" value=\"\">\n\t\t<input type=\"hidden\" id=\"bugira_widget_reporter_chatroom\" name=\"chatroom\" value=\"\">\n\t\t<input type=\"hidden\" id=\"bugira_widget_reporter_extra\" name=\"report[extra]\" value='"+(null==(t=e.extra)?"":t)+"'>\n\n\n\t\t<input type=\"hidden\" name=\"api_key\" value=\""+(null==(t=e.api_key)?"":t)+"\">\n\n\n\t\t",n+=e.userName?"\n\t\t<input type=\"hidden\" name=\"reporter[name]\" value=\""+(null==(t=e.userName)?"":t)+"\" id=\"bugira_widget_reporter_name\" >\n\t\t":"\n\t\t<label for=\"bugira_widget_reporter_name\">Your name</label>\n\t\t<input type=\"text\" name=\"reporter[name]\" class=\"bugira-user\" id=\"bugira_widget_reporter_name\" >\n\t\t",n+="\n\n\t\t",n+=e.userEmail?"\n\t\t<input type=\"hidden\" value=\""+(null==(t=e.userEmail)?"":t)+"\" name=\"reporter[email]\" id=\"bugira_widget_reporter_email\" >\n\t\t":"\n\t\t<label for=\"bugira_widget_reporter_email\">Your email</label>\n\t\t<input type=\"text\" name=\"reporter[email]\" class=\"bugira-user\" id=\"bugira_widget_reporter_email\" >\n\t\t",n+="\n\n\n\t\t<label for=\"bugira_widget_reporter_description\" >"+(null==(t=e.label_description)?"":t)+"</label>\n\t\t<textarea name=\"description\" id=\"bugira_widget_reporter_description\" class=\"bugira-description\">",e.description&&function(){n+=i.call(arguments,"")}(e.description),n+="</textarea>\n\n\t\t<div class=\"bugira_agree_area\">\n\t\t\t<input type=\"checkbox\" name=\"agree\" id=\"bugira_widget_agree\" checked=\"checked\" value=\"1\">\n\t\t\t<label for=\"bugira_widget_agree\">I agree to submit information about my latest activity on this page.</label>\n\t\t</div>\n\n\t\t\n\n\n\t\t<div class=\"area\">\n\t\t\t<input type=\"button\" class=\"bugira-selection\" value=\"Select text on the page\">\n\n\t\t\t<div class=\"text-selection\">\t\t\t\t\n\t\t\t\t<div>Selection <a href=\"#\">&times;</a></div>\n\t\t\t\t<p>\n\t\t\t\t\t\xAB<em></em>\xBB \n\t\t\t\t</p>\t\t\t\t\n\t\t\t</div>\n\n\t\t\t<input type=\"button\" class=\"bugira-screenshot\" value=\"Select area for screenshot\">\n\n\n\t\t\t<div class=\"status\" style=\"display: none\">\n\t\t\t\tScreenshot taken\n\t\t\t\t<span class=\"size\"></span> <a href=\"#\">&times;</a>\n\t\t\t\t<div class=\"screenshot-demo\"></div>\t\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\n\t\t<input value=\"Submit\" type=\"submit\" class=\"bugira-submit\">\n\t\t<input type=\"button\" class=\"bugira-cancel\" value=\"Cancel\">\n\t\t\n\t</form>\n\t<div class=\"bugira-credits\">Powered by <a href=\"https://bugira.com\" target=\"_blank\">Bugira</a>. <b>We respect your <a target=\"_blank\" href=\"https://www.bugira.com/privacy.html\">Privacy</a></b></div>\n \n</div>\n\n\n<div id=\"bugira_widget_message\" style=\"display: none\">\n\t<p class=\"bugira_widget_message_text\"></p>\n\t<a href=\"#\">Close</a>\n\t<iframe name=\"bugiraRemoteFrame\" width=\"200px\" height=\"20px\" src=\"data:text/html;charset=utf-8,<html><head></head><body>Please wait...</body></html>\" scrolling=\"no\"></iframe>\n</div>",n},t.style="#bugira-widget.bugira-open .bugira-dialog{display:block}#bugira-widget.bugira-open #bugira-button{position:fixed;width:0;height:0;top:-100px;left:0}#bugira-widget.bugira-open .bugira-cancel{display:none}#bugira-widget.bugira-inline .bugira-dialog{position:relative;width:100%}#bugira-widget.bugira-inline .bugira-message{position:relative}#bugira-widget h1,#bugira-widget h2,#bugira-widget h3,#bugira-widget h4,#bugira-widget h5,#bugira-widget h6,#bugira-widget p,#bugira-widget div,#bugira-widget span,#bugira-widget input,#bugira-widget form,#bugira-widget button,#bugira-widget textarea{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;font-family:sans-serif !important}#bugira-widget #bugira-button{-moz-transition:background 1s;-o-transition:background 1s;-webkit-transition:background 1s;transition:background 1s;cursor:pointer;text-decoration:none;text-align:center;padding:5px 10px;font-size:0.9em;color:#fff;font-weight:bold;display:inline-block;font-family:sans-serif;border:1px solid #999;background:#95a5a6;z-index:99999;position:fixed;right:20px;bottom:0px}#bugira-widget #bugira-button:hover{background:#1abc9c}#bugira-widget #bugira-button.bugira-open{display:none}#bugira-widget .bugira-dialog{display:none;background:#bdc3c7;font-size:13px;color:#15280E;padding:25px 20px;box-shadow:5px 30px 10px rgba(0,0,0,0.4),inset 1px 1px 1px #fff;z-index:99999;position:fixed;right:20px;bottom:0;width:350px}#bugira-widget .bugira-dialog a{color:#2980b9 !important}#bugira-widget .bugira_agree_area{display:flex}#bugira-widget .bugira_agree_area input{margin-right:10px}#bugira-widget .bugira-user{width:100%;margin:5px 0;background:white;padding:5px;border:1px solid #7f8c8d;-moz-box-shadow:0 1px 1px #666;-webkit-box-shadow:0 1px 1px #666;box-shadow:0 1px 1px #666;border:none;background:#f5f7f7}#bugira-widget .bugira-description{width:100%;height:80px;margin:5px 0;background:white;padding:5px;border:1px solid #7f8c8d;-moz-box-shadow:0 1px 1px #666;-webkit-box-shadow:0 1px 1px #666;box-shadow:0 1px 1px #666;border:none;background:#f5f7f7}#bugira-widget label{font-size:14px;width:100%;color:#7f8c8d;text-align:left;padding:0 0 0 0;margin:0 0 0 0;text-shadow:none}#bugira-widget .bugira-submit{font-size:16px;background:#1abc9c;cursor:pointer;padding:10px 20px;color:#333;border:none;-moz-transition:background 1s;-o-transition:background 1s;-webkit-transition:background 1s;transition:background 1s;-moz-box-shadow:0 2px 1px #7f8c8d;-webkit-box-shadow:0 2px 1px #7f8c8d;box-shadow:0 2px 1px #7f8c8d;color:#fff;float:left}#bugira-widget .bugira-submit:hover{background:#28e1bd}#bugira-widget .bugira-submit:active{margin-top:2px;-moz-box-shadow:0 0 0 #7f8c8d;-webkit-box-shadow:0 0 0 #7f8c8d;box-shadow:0 0 0 #7f8c8d}#bugira-widget .bugira-cancel{font-size:16px;background:#ecf0f1;cursor:pointer;padding:10px 20px;color:#333;border:none;-moz-transition:background 1s;-o-transition:background 1s;-webkit-transition:background 1s;transition:background 1s;-moz-box-shadow:0 2px 1px #7f8c8d;-webkit-box-shadow:0 2px 1px #7f8c8d;box-shadow:0 2px 1px #7f8c8d;color:#7f8c8d;float:right}#bugira-widget .bugira-cancel:hover{background:#fff}#bugira-widget .bugira-cancel:active{margin-top:2px;-moz-box-shadow:0 0 0 #7f8c8d;-webkit-box-shadow:0 0 0 #7f8c8d;box-shadow:0 0 0 #7f8c8d}#bugira-widget .bugira-screenshot{font-size:16px;background:#2980b9;cursor:pointer;padding:10px 20px;color:#333;border:none;-moz-transition:background 1s;-o-transition:background 1s;-webkit-transition:background 1s;transition:background 1s;-moz-box-shadow:0 2px 1px #7f8c8d;-webkit-box-shadow:0 2px 1px #7f8c8d;box-shadow:0 2px 1px #7f8c8d;color:#fff;width:100%}#bugira-widget .bugira-screenshot:hover{background:#409ad5}#bugira-widget .bugira-screenshot:active{margin-top:2px;-moz-box-shadow:0 0 0 #7f8c8d;-webkit-box-shadow:0 0 0 #7f8c8d;box-shadow:0 0 0 #7f8c8d}#bugira-widget .bugira-selection{font-size:16px;background:#7f8c8d;cursor:pointer;padding:10px 20px;color:#333;border:none;-moz-transition:background 1s;-o-transition:background 1s;-webkit-transition:background 1s;transition:background 1s;-moz-box-shadow:0 2px 1px #7f8c8d;-webkit-box-shadow:0 2px 1px #7f8c8d;box-shadow:0 2px 1px #7f8c8d;color:#fff;width:100%}#bugira-widget .bugira-selection:hover{background:#9aa4a5}#bugira-widget .bugira-selection:active{margin-top:2px;-moz-box-shadow:0 0 0 #7f8c8d;-webkit-box-shadow:0 0 0 #7f8c8d;box-shadow:0 0 0 #7f8c8d}#bugira-widget .area{margin:10px 0px}#bugira-widget .bugira-form{margin:0px 0px 0px 0px;padding:0px 0px 0px;background:none}#bugira-widget .bugira-message{display:none;padding:3px;text-align:center;background-color:#bdc3c7;font-weight:bold}#bugira-widget .bugira-credits{clear:both;padding-top:20px;display:block;font-size:12px;color:#666}#bugira-widget #bugira_widget_message{position:fixed;bottom:0px;right:20px;width:40%;background:#ecf0f1;padding:10px;color:#000;text-align:left;font-weight:bold;z-index:5000}#bugira-widget #bugira_widget_message p{padding-left:10px}#bugira-widget #bugira_widget_message a{float:right;color:#3498db;font-weight:bold}#bugira-widget #bugira_widget_screenshot_selection_area{border:1px solid #2980b9;background:rgba(41,128,185,0.1);position:fixed;z-index:5000}#bugira-widget .text-selection{padding:10px;margin:5px 0;border:3px dashed #eee;display:none}#bugira-widget .chat{position:absolute;left:0;right:0;bottom:0px;top:0px;padding:20px;background:#bdc3c7;z-index:20000}#bugira-widget .area .status{background:#ddd;padding:1px;text-align:center}#bugira-widget .area .status a{color:#34495e}#bugira-widget .area .status .screenshot-demo{width:100%;height:100px}#bugira-widget iframe{border:none;color:#333;width:70%;height:2em}#bugira-widget .chat h3{font-weight:bold;text-align:center;color:#666;text-transform:uppercase}#bugira-widget .bugira-chat #main-view #messaging{position:absolute;bottom:60px;right:0;left:0;padding:10px;top:30px}#bugira-widget .bugira-chat #messaging-content{background:#fff;height:100%}#bugira-widget .bugira-chat #messaging-content #messages{height:100%;overflow-y:scroll}#bugira-widget #bugira_widget_end_chat{font-size:16px;background:#ecf0f1;cursor:pointer;padding:10px 20px;color:#333;border:none;-moz-transition:background 1s;-o-transition:background 1s;-webkit-transition:background 1s;transition:background 1s;-moz-box-shadow:0 2px 1px #7f8c8d;-webkit-box-shadow:0 2px 1px #7f8c8d;box-shadow:0 2px 1px #7f8c8d;color:#7f8c8d;position:absolute;bottom:0px}#bugira-widget #bugira_widget_end_chat:hover{background:#fff}#bugira-widget #bugira_widget_end_chat:active{margin-top:2px;-moz-box-shadow:0 0 0 #7f8c8d;-webkit-box-shadow:0 0 0 #7f8c8d;box-shadow:0 0 0 #7f8c8d}html #bugira_widget .grey .bugira-button{color:white} ";var i=function(){class e{constructor(){this.services.dialog=new s,this.services.spy=new y,this.services.history=new c,this.services.controller=new d,this.services.snapshot=new b,this.services.form=new p,this.services.html2canvas=window.html2canvas,this.services.sizzle=n,this.services.rrweb=r,this.services.recorder=new h,this.services.screenshot=new m,this.services.storage=new x,this.services.user=new E,this.services.selection=new f,this.services.message=new g,this.services.chat=new a,this.services.text=new v,this.services.errorHandler=new l,this.services.mutation=new u,this.services.subscriber=new w,this.injectServices()}injectServices(){var e,t,o,n,r;for(e in t=this.services,o=[],t)(r=t[e],void 0!==r.needs)&&o.push(function(){var e,t,o,a;for(o=r.needs,a=[],(e=0,t=o.length);e<t;e++)n=o[e],a.push(r[n]=this.services[n]);return a}.call(this));return o}loadConfig(){var e;return e=function(t,o){var n,r;for(r in o)try{t[r]=o[r].constructor===Object?e(t[r],o[r]):o[r]}catch(e){n=e,t[r]=o[r]}return t},this.config=e(this.defaults,window[this.user_config]),this.config.extra&&(this.config.extra=JSON.stringify(this.config.extra)),this.config}init(){var e,o;return console.log("Bugira Widget Initialized"),this.loadConfig(),o=t.JST["view/widget.html"],e=o(this.config),this.config.createDiv&&this.services.dialog.createElement(),this.services.dialog.build(e,t.style),this.services.dialog.insert(this.root),this.services.controller.bindEvents(),this.services.spy.init(),this.services.errorHandler.init(),this.services.mutation.init(),this.services.chat.init(this.config.chat),this.services.subscriber.init(this.config),this.services.recorder.init()}load(){var e,t;return"complete"===document.readyState||"interactive"===document.readyState?setTimeout(()=>this.init(),1):(e=void 0,document.addEventListener?(e=()=>(document.removeEventListener("DOMContentLoaded",e,!1),this.init()),document.addEventListener("DOMContentLoaded",e)):document.attachEvent?(e=()=>{if("complete"===document.readyState)return document.detachEvent("onreadystatechange",e),this.init()},document.attachEvent("onreadystatechange",e)):window.onload?(t=window.onload,window.onload=()=>(t(),this.init())):window.onload=()=>this.init())}}return e.prototype.services={},e.prototype.config={},e.prototype.root="bugira-widget",e.prototype.user_config="__bugira_config",e.prototype.defaults={userName:!1,userEmail:!1,description:!1,hideOnSubmit:!0,createDiv:!1,url:"https://bugira.app/report",extra:null,chat:{roomUrl:"https://bugira.app/report_handshake",userAvatar:"https://bugira.app/images/user.png",scriptUrl:"https://bugira.app/assets/chat.js",styleUrl:"https://bugira.app/assets/chat.css",host:"https://bugira.app:4400",container:"#bugira-support-chat"},label_button:"Report an Issue",label_description:"Describe what is wrong"},e}.call(this);var a=function(){class e{init(e){var t;if(this.config=e,t=this.storage.restore("room"),t&&this.user.name())return this.room=t,this.preloadChat(()=>this.createChat(this.user.name()))}fetchRoom(){var e;return e=new XMLHttpRequest,e.open("POST",this.config.roomUrl,!0),"overrideMimeType"in e&&e.overrideMimeType("text/plain"),e.onreadystatechange=()=>{var t;if(4===e.readyState){if(0===(t=e.status)||200===t)return this.room=e.responseText,this.storage.store("room",this.room);throw new Error(`Could not get chat room at ${this.config.roomUrl}`)}},e.send()}currentRoom(){return this.room}preloadChat(e){var t,o;return t=document.createElement("script"),t.onload=()=>this.loaded=!0,t.src=this.config.scriptUrl,e&&(t.onload=e),document.head.appendChild(t),o=document.createElement("link"),o.href=this.config.styleUrl,o.rel="stylesheet",o.media="screen",document.head.appendChild(o)}createChat(e){var t;if(this.room)return t={onNewMessage:()=>{var t,o;t=new Audio(this.audio);try{t.play()}catch(e){o=e,console.log(o)}if(!(this.started&&this.dialog.isVisible()))return this.started=!0,this.dialog.showChat()},onUserLeft:function(){},onUserEntered:function(){}},this.chat=window.bugira_chat.init(this.config),this.chat.start(`user_${this.room}`,e,this.config.userAvatar,this.room,t)}endChat(){return this.started=!1,this.chat.stop(),this.dialog.hideChat()}}return e.prototype.needs=["dialog","storage","user"],e.prototype.audio="https://bugira.app/ping.mp3",e.prototype.config={},e.prototype.room=null,e.prototype.userId=0,e.prototype.started=!1,e.prototype.loaded=!1,e.prototype.chat=null,e}.call(this);var d=function(){class e{constructor(){this["click button"]=this["click button"].bind(this),this["submit form"]=this["submit form"].bind(this),this["click cancel"]=this["click cancel"].bind(this),this["click select"]=this["click select"].bind(this),this["click textClear"]=this["click textClear"].bind(this),this["click capture"]=this["click capture"].bind(this),this["click screenDelete"]=this["click screenDelete"].bind(this),this["click endChat"]=this["click endChat"].bind(this)}["click button"](t){var o,e,n,r;return"block"===this.dialog.dialog().style.display?(this.dialog.hide(),!1):(this.form.clear(),this.dialog.show(),null!=(n=this.chat)&&n.fetchRoom(),null!=(r=this.chat)&&r.preloadChat(),this.el("name").focus(),t.stopPropagation(),o=t=>{var e;return(e=t&&t.target||event&&event.srcElement,!this.dialog.contains(e))&&!this.alwaysOnTop&&(this.dialog.hide(),document.detachEvent&&document.detachEvent("click",o),document.removeEventListener&&document.removeEventListener("click",o),!1)},document.addEventListener?document.addEventListener("click",o):document.attachEvent?document.attachEvent("click",o):(e=document.onclick,document.onclick=()=>(o(),document.onclick=e)),!1)}["submit form"](){var e,t,o;return!!this.form.validate()&&(this.user.save(this.form.get("name"),this.form.get("email")),this.form.set("window",window.innerWidth+"x"+window.innerHeight),this.form.set("resolution",window.screen.width+"x"+window.screen.height),this.form.set("chatroom",null==(e=this.chat)?void 0:e.currentRoom()),"checked"===this.el("agree").getAttribute("checked")&&(this.form.set("history",JSON.stringify(this.history.all())),this.form.set("snapshot",JSON.stringify(this.recorder.get()))),null!=(t=this.chat)&&t.createChat(this.el("name").value),this.subscriber.onSubmit(),null!=(o=this.message)&&o.show("The report has been sent"),this.dialog.hide(),this.form.clear(),this.dialog.hideButton(),!0)}["click cancel"](){return this.dialog.hide(),this.dialog.showButton(),!1}["click select"](){var e;return this.alwaysOnTop=!0,this.dialog.hide(),null!=(e=this.message)&&e.show("Select text with a typo"),this.text.select(e=>(this.dialog.show(),this.el("select").style.display="none",this.el("textStatus").style.display="block",this.el("textData").innerText=e,this.el("selection").value=e,this.message.hide(),!1)),!1}["click textClear"](){return this.el("textData").innerText="",this.el("textStatus").style.display="none",this.el("select").style.display="block",this.el("selection").value="",!1}["click capture"](t){var e;return t.stopPropagation(),t.preventDefault(),null!=(e=this.message)&&e.show("Select an area for capturing screenshot"),this.dialog.hide(),this.dialog.hideButton(),this.screenshot.renderToForm=e=>this.el("screenshot").value=e,this.screenshot.renderToWidget=e=>this.el("screenDemo").style.background=`url(${e}) no-repeat`,this.selection.captureArea((e,t)=>this.screenshot.capture(()=>{var o,n;return this.message.hide(),this.screenshot.crop(e.x,e.y,t.x,t.y),this.el("capture").style.display="none",n=t.x-e.x,o=t.y-e.y,this.el("screenSize").innerText=` (${n}x${o})`,this.el("screenStatus").style.display="block",this.dialog.show()}))}["click screenDelete"](){var e;return this.el("screenshot").value="",this.el("screenDemo").style.background="",e=this.el("screenStatus"),this.el("screenSize").innerText="",e.style.display="none",this.el("capture").style.display="block",!1}["click endChat"](){return this.chat.endChat()}el(e){return this.sizzle(this.dialog.elements[e],this.dialog.el)[0]}bindEvents(){var e,t,o,n;for(e in o=this,n=[],o)(t=o[e],-1!==e.indexOf(" "))&&(e=e.split(" "),n.push(this.el(e[1])["on"+e[0]]=t));return n}}return e.prototype.needs=["dialog","snapshot","history","sizzle","user","screenshot","recorder","selection","message","chat","text","subscriber","form"],e.prototype.alwaysOnTop=!1,e}.call(this);var s=function(){class e{build(e,t){return this.html=e,this.style=document.createElement("style"),this.style.innerHTML=t}createElement(){var e;return e=document.createElement("div"),e.id="bugira-widget",document.body.appendChild(e)}rebuild(){if(this.el.innerHTML=this.html,this.form.get("name")||this.form.set("name",this.user.name()),!this.form.get("email"))return this.form.set("email",this.user.email())}insert(e){var t;return null!=(t=document.getElementsByTagName("head")[0])&&t.appendChild(this.style),this.el=document.getElementById(e),this.el?this.rebuild():void 0}dialog(){return this.sizzle(this.elements.dialog,this.el)[0]}show(){return this.subscriber.onOpen(),this.dialog().style.display="block"}hide(){return this.dialog().style.display="none",this.subscriber.onClose()}hideButton(){var e;return null==(e=this.sizzle(this.elements.button)[0])?void 0:e.style.display="none"}showButton(){var e;return null==(e=this.sizzle(this.elements.button)[0])?void 0:e.style.display="block"}showChat(){var e,t;return this.message.hide(),null!=(e=this.sizzle(this.elements.chat,this.el)[0])&&(e.style.display="block"),null!=(t=this.sizzle(this.elements.endChat,this.el)[0])&&(t.style.display="block"),this.subscriber.onChat(),this.show()}isVisible(){return"block"===this.dialog().style.display}hideChat(){var e;return this.hide(),null!=(e=this.sizzle(this.elements.chat,this.el)[0])&&(e.style.display="none"),!1}clearForm(){return this.form.clear()}contains(e){if(!e)return!0;for(;e.parentNode;){if(e===this.el)return!0;e=e.parentNode}return!1}}return e.prototype.needs=["sizzle","user","message","subscriber","form"],e.prototype.alwaysOnTop=!1,e.prototype.elements={window:"#bugira_widget_reporter_window",resolution:"#bugira_widget_reporter_resolution",history:"#bugira_widget_reporter_history",record:"#bugira_widget_reporter_record",snapshot:"#bugira_widget_reporter_snapshot",screenshot:"#bugira_widget_reporter_screenshot",selection:"#bugira_widget_reporter_selection",chatroom:"#bugira_widget_reporter_chatroom",extra:"#bugira_widget_reporter_extra",agree:"#bugira_widget_agree",name:"#bugira_widget_reporter_name",email:"#bugira_widget_reporter_email",description:"#bugira_widget_reporter_description",button:"#bugira-button",submit:".bugira-submit",cancel:".bugira-cancel",dialog:".bugira-dialog",capture:".bugira-screenshot",select:".bugira-selection",form:"form",textStatus:".area .text-selection",textClear:".area .text-selection a",textData:".area .text-selection p em",screenStatus:".area .status",screenDelete:".area .status a",screenDemo:".area .status .screenshot-demo",screenSize:".area .status .size",chat:".chat",endChat:"#bugira_widget_end_chat"},e}.call(this);var l=function(){class e{init(){return window.addEventListener("error",e=>e.error?-1<e.error.message.indexOf("Script error.")?void 0:this.history.add({e:"error",v:e.error.stack}):void this.history.add({e:"error",v:JSON.stringify(e)}))}}return e.prototype.needs=["history"],e}.call(this);var p=function(){class e{validate(){return!!this.el("description").value&&!!this.el("name").value&&!!this.el("email").value}get(e){return this.el(e).value}set(e,t){if(-1===this.fields.indexOf(e))throw new Error(`Field '${e}' is not defined. Available: ${this.fields.join(", ")}`);return"description"===e?void(this.el(e).innerText=t):this.el(e).value=t}clear(){var e,t,o,n,r,a,d;for(n=this.fields,t=0,o=n.length;t<o;t++)e=n[t],null!=(r=this.el(this.fields[e]))&&(r.value="");return null!=(a=this.el("description"))&&(a.innerText=""),null==(d=this.el("agree"))?void 0:d.setAttribute("checked","checked")}el(e){return this.sizzle(this.dialog.elements[e],this.dialog.el)[0]}}return e.prototype.needs=["sizzle","dialog"],e.prototype.fields=["window","resolution","history","snapshot","screenshot","selection","chatroom","extra","agree","name","email","description","record"],e}.call(this);var c=function(){class e{all(){var e,t,o;if(o=this.storage.restore(this.key),null==o)return[];try{t=JSON.parse(o)}catch(t){return e=t,[]}return t}add(e){var t,o;for(o=this.all(),e.d=Date.now(),t=window.location.href,e.u=t,o.push(e);o.length>this.max_length;)o.shift();return this.storage.store(this.key,JSON.stringify(o))}}return e.prototype.needs=["storage"],e.prototype.key="bugira_hstry",e.prototype.max_length=50,e.prototype.url=null,e}.call(this);var g=function(){class e{show(e){return this.box=this.box||document.getElementById(this.messageBoxId),this.messageArea=this.sizzle(this.messageAreaSelector,this.box)[0],this.messageArea.innerText=e,this.closeButton=this.sizzle(this.messageCloseSelector,this.box)[0],this.closeButton.onclick=()=>this.hide(),this.box.onclick=()=>this.hide(),this.box.style.display="block"}hide(){return!!this.box&&(this.box.style.display="none",this.messageArea.innerText="",this.dialog.showButton(),!1)}}return e.prototype.needs=["sizzle","dialog"],e.prototype.messageBoxId="bugira_widget_message",e.prototype.messageAreaSelector="p",e.prototype.messageCloseSelector="a",e}.call(this);var u=function(){class e{init(){var e,t,o;if(MutationObserver)return o=document.getElementsByTagName("body")[0],t=new MutationObserver(e=>e.forEach(e=>e.addedNodes.forEach(e=>e.getElementsByTagName?this.spy.watchElement(e):void 0))),e={childList:!0,characterData:!1,subtree:!0},t.observe(o,e)}}return e.prototype.needs=["spy"],e}.call(this);var h=function(){class e{init(){return this.rrweb({emit:e=>this.events.push(e)})}get(){return this.events}}return e.prototype.needs=["rrweb"],e.prototype.events=[],e}.call(this);var m=function(){class e{capture(e){return this.rendering=!0,this.html2canvas(document.body).then(t=>{if(this.rendering=!1,this.image=t.toDataURL("image/png"),e)return e()})}crop(e,t,o,n){var r,i;return r=document.createElement("canvas"),i=new Image,i.src=this.image,i.onload=()=>{var a,d,s;if(s=o-e,d=n-t,a=r.getContext("2d"),a.drawImage(i,e,t,s,d,0,0,s,d),this.newImage=r.toDataURL("image/png"),this.renderToForm&&this.renderToForm(this.newImage),this.renderToWidget)return this.renderToWidget(this.newImage)}}}return e.prototype.needs=["html2canvas"],e.prototype.image=null,e.prototype.rendering=!1,e.prototype.renderToForm=null,e.prototype.renderToWidget=null,e}.call(this);var f=function(){class e{constructor(){this.start=this.start.bind(this),this.finish=this.finish.bind(this),this.resizeArea=this.resizeArea.bind(this)}px(e){return e+"px"}captureArea(e){return(this.from=null,this.to={},this.direction={right:!0,bottom:!0},this.complete=e,this.area=document.getElementById(this.areaId),!document.addEventListener)?null:(document.addEventListener("mousemove",this.resizeArea),document.addEventListener("mousedown",this.start),document.addEventListener("mouseup",this.finish),document.body.style.cursor="crosshair")}start(t){return t.stopPropagation(),t.preventDefault(),this.message.hide(),this.visible=!0,this.area.style.display="block",document.removeEventListener("mousedown",this.start,!1),!1}finish(t){var e;return t.stopPropagation(),t.preventDefault(),null!=(e=this.message)&&e.show("Processing screenshot..."),document.body.style.cursor="auto",document.removeEventListener("mouseup",this.finish,!1),document.removeEventListener("mousemove",this.resizeArea),this.area.style.display="none",this.complete&&this.complete(this.from,this.to),this.visible=!1,!1}resizeArea(t){return(this.mouse.x=t.clientX||t.pageX,this.mouse.y=t.clientY||t.pageY,!!!this.visible)||(this.from||(this.from={x:this.mouse.x,y:this.mouse.y}),this.direction.right=this.mouse.x>=this.from.x,this.direction.right&&(this.to.x=this.mouse.x),this.direction.right||(this.from.x=this.mouse.x),this.direction.bottom=this.mouse.y>=this.from.y,this.direction.bottom&&(this.to.y=this.mouse.y),this.direction.bottom||(this.from.y=this.mouse.y),this.area.style.left=this.px(this.from.x),this.area.style.top=this.px(this.from.y),this.area.style.right=this.px(window.innerWidth-this.to.x),this.area.style.bottom=this.px(window.innerHeight-this.to.y))}}return e.prototype.needs=["message"],e.prototype.areaId="bugira_widget_screenshot_selection_area",e.prototype.area=null,e.prototype.message=null,e.prototype.mouse={},e.prototype.from=null,e.prototype.to={},e.prototype.complete=null,e.prototype.visible=!1,e.prototype.direction={right:!0,bottom:!0},e}.call(this);var b=function(){class e{get(){return this.snapshot||this.make()||null}fixAttributes(e,t){var o;if(o=t.nodeName.toLowerCase(),"object"===o)return t.outerHTML=e.outerHTML;if("input"!==o||"checkbox"!==e.type&&"radio"!==e.type){if("option"===o)return t.selected=e.defaultSelected;if("input"===o||"textarea"===o)return t.defaultValue=e.value?e.value:e.defaultValue;if("a"===o||"link"===o)return t.setAttribute("href",e.href);if("img"===o)return t.setAttribute("src",e.src)}else if(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value)return t.value=e.value}cloneNode(e){var t,o,n;for(o=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),t=e.firstChild;t;)this.dialog.contains(t)||"script"===t.nodeName.toLowerCase()||(n=this.cloneNode(t),this.fixAttributes(t,n),o.appendChild(n)),t=t.nextSibling;return o}make(){var e,t,o,n,r,a,d,s,l;for(d=this.cloneNode(document.body.parentNode),a=this.sizzle("select>option"),(o=0,n=a.length);o<n;o++)r=a[o],r.selected?r.setAttribute("selected",!0):r.removeAttribute("selected");return l="<!DOCTYPE html>",document.body.parentNode.previousSibling&&(e=document.body.parentNode.previousSibling,l=`<!DOCTYPE ${e.nodeName} `,e.publicId&&(l+=e.publicId),l+=" >"),s=d.getElementsByTagName("title"),s.length||(s=document.createElement("title"),d.getElementsByTagName("head")[0].appendChild(s)),s.innerHTML=`! Page Snapshot !| ${s.innerHTML}`,t=document.createElement("meta"),t.setAttribute("href","/favicon.png"),t.setAttribute("type","image/png"),d.getElementsByTagName("head")[0].appendChild(t),this.snapshot=l+"<html>"+d.innerHTML+"</html>"}}return e.prototype.needs=["dialog","sizzle"],e}.call(this);var y=function(){class e{init(){if(this.watchTree(document),this.history.add({e:"moved"}),"onhashchange"in window&&"addEventListener"in window)return window.addEventListener("hashchange",()=>this.history.add({e:"moved"}))}watchElement(e){if("A"===e.tagName&&this.handleClick(e),"INPUT"===e.tagName&&("submit"===e.getAttribute("type")&&this.handleClick(e),"text"===e.getAttribute("type")&&this.handleInput(e)),"TEXTAREA"===e.tagName&&this.handleInput(e),e.hasAttribute("contenteditable"))return this.handleInput(e)}watchTree(e){var t,o,r,i,a,d,s,p,c,g,u,h,f,b,y,x,w;for(h=e.getElementsByTagName("a"),o=0,a=h.length;o<a;o++)t=h[o],this.handleClick(t);for(f=e.getElementsByTagName("button"),r=0,d=f.length;r<d;r++)t=f[r],this.handleClick(t);for(b=e.getElementsByTagName("input"),i=0,s=b.length;i<s;i++)t=b[i],"submit"===t.getAttribute("type")&&this.handleClick(t),"text"===t.getAttribute("type")&&this.handleInput(t);for(y=e.getElementsByTagName("textarea"),g=0,p=y.length;g<p;g++)t=y[g],this.handleInput(t);for(x=e.querySelectorAll("[contenteditable]"),w=[],(u=0,c=x.length);u<c;u++)t=x[u],w.push(this.handleInput(t));return w}handleClick(e){return this.bind(e,"click",t=>this.record(t.type,t.target,t.target.innerHTML))}handleInput(e){return this.bind(e,"focus",t=>{var o,n;return o=()=>"INPUT"===t.target.tagName?t.target.value:"TEXTAREA"===t.target.tagName?t.target.value:t.target.innerText,n=o(),this.bind(t.target,"blur",t=>n===o()?void 0:this.record("input",t.target,o()))})}record(e,t,o){return this.history.add({e:e,t:this.getTag(t),n:this.describeElement(t),x:this.getElementXPath(t),a:this.getAttributes(t),s:this.getElementStyle(t),u:window.location.href,v:o})}bind(e,t,o){var n;if(!this.dialog.contains(e))return(n=t=>o.call(this,t),e.addEventListener)?(e.removeEventListener(t,n),e.addEventListener(t,n)):e.attachEvent?(e.detachEvent(`on${t}`,n),e.attachEvent(`on${t}`,n)):void 0}getTag(e){var t;return null==(t=e.tagName)?void 0:t.toLowerCase()}getElementPath(e){var t,o,n,r,a,d,s;if(t=void 0,o=[],d=null,s="",n=function(e){var t,o;if(o=1,t=void 0,e.nodeType===Node.ATTRIBUTE_NODE)return null;for(t=e.previousSibling;t;)t.nodeName===e.nodeName&&++o,t=t.previousSibling;return o},e instanceof Document)return"/";for(;e&&!(e instanceof Document);){switch(t=o[o.length]={},t.attrs={},e.nodeType){case Node.TEXT_NODE:t.name="text()";break;case Node.ATTRIBUTE_NODE:t.name="@"+e.nodeName;break;case Node.PROCESSING_INSTRUCTION_NODE:t.name="processing-instruction()";break;case Node.COMMENT_NODE:t.name="comment()";break;case Node.ELEMENT_NODE:t.name=e.nodeName;}t.position=n(e),e.getAttribute("id")&&(t.attrs.id=e.getAttribute("id")),t.attrs.id||(e.getAttribute("class")&&(t.attrs.class=e.getAttribute("class")),e.getAttribute("name")&&(t.attrs.name=e.getAttribute("name")),e.getAttribute("value")&&(t.attrs.value=e.getAttribute("value"))),e=e.nodeType===Node.ATTRIBUTE_NODE?e.ownerElement:e.parentNode}for(r=o.length-1;0<=r;){for(a in t=o[r],s+="/"+t.name.toLowerCase(),null!==t.position&&(s+="["+t.position+"]"),t.attrs)s+=`[@${a}="${t.attrs[a]}"]`;r--}return s}getAttributes(e){var t,o,n,r,a;for(o=[],n=r=0,a=e.attributes.length-1;0<=a?r<=a:r>=a;n=0<=a?++r:--r)(t=e.attributes[n],!!t)&&o.push(`${t.nodeName}="${t.nodeValue}"`);return o.join(" ")}describeElement(e){var t,o,n,r,i;return(t=function(t){return e.getAttribute(t)},i="",this.sizzle.matchesSelector(e,":input")&&null!=t("id")&&(o=null==(n=this.sizzle(`label[for=${t("id")}]`))||null==(r=n[0])?void 0:r.innerText,o))?o:"input"===this.getTag(e)&&0<=["submit","button"].indexOf(t("type"))?t("value"):"input"===this.getTag(e)?t("name"):t("placeholder")?t("placeholder"):(i=e.innerText,i)}getElementStyle(e){var t,o,n,r,i,a,d,s;for(s=["color","background","border","textTransform","textShadow","fontWeight","fontFamily","fontStyle"],o={},t=window.getComputedStyle(e),(r=0,i=s.length);r<i;r++)a=s[r],o[a]=t[a];return d="rgba(0, 0, 0, 0)",n=e=>(t=window.getComputedStyle(e),t.backgroundColor===d?e.parentNode?n(e.parentNode):d:t.backgroundColor),o.backgroundColor=n(e),o}getElementXPath(e){var t,o,n,r,a,d;if(o=e.tagName.toLowerCase(),""!==e.id)return"//"+o+"[@id=\""+e.id+"\"]";if(e===document.body)return"//"+o;for(r=0,d=e.parentNode.childNodes,n=0;n<d.length;){if(a=d[n],t="",name===e.getAttribute("name")&&(t="[@name=\""+name+"\"]"),a===e)return this.getElementXPath(e.parentNode)+"/"+o+"["+(r+1)+"]"+t;1===a.nodeType&&a.tagName===e.tagName&&r++,n++}}}return e.prototype.needs=["dialog","history","sizzle"],e}.call(this);var x=class e{store(t,o){return null==e?this.saveToCookie():sessionStorage[t]=o}restore(t){return null==e?this.restoreFromCookie(t):sessionStorage[t]}saveToCookie(e,t){return document.cookie=e+"="+t+"; path=/"}restoreFromCookie(e){var t,o,n,r;for(r=e+"=",o=document.cookie.split(";"),n=0;n<o.length;){for(t=o[n];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(r))return t.substring(r.length,t.length);n++}return null}};var w=function(){class e{init(e){return this.config=e}onSubmit(){if(this.config.onSubmit)return this.config.onSubmit(this.services())}onOpen(){if(this.config.onOpen)return this.config.onOpen(this.services())}onClose(){if(this.config.onClose)return this.config.onClose(this.services())}onChat(){if(this.config.onChat)return this.config.onChat(this.services())}onLoad(){if(this.config.onLoad)return this.config.onLoad(this.services())}onReceive(){if(this.config.onReceive)return this.config.onReceive(this.services())}services(){var e;return e={},this.needs.forEach(t=>e[t]=this[t]),e}}return e.prototype.needs=["history","dialog","message","user","form"],e}.call(this);var v=function(){class e{select(e){return this.callback=e,document.body.addEventListener("mouseup",this.selectHandler.bind(this))}selectHandler(t){var e,o;if(t.preventDefault(),e=t&&t.target||event&&event.srcElement,!this.dialog.contains(e))return(window.getSelection&&(o=window.getSelection().toString()),document.selection&&(o=document.selection.createRange().text),!o)?null:(this.selection=o,this.spy.record("selected",t.target,o),document.body.removeEventListener("mouseup",this.selectHandler),this.callback(o),!1)}}return e.prototype.needs=["message","dialog","spy"],e.prototype.selection=null,e.prototype.callback=null,e}.call(this);var E;E=function(){class e{save(e,t){return this.storage.saveToCookie(this.user_key,e),this.storage.saveToCookie(this.email_key,t)}name(){return this.storage.restoreFromCookie(this.user_key||"")}email(){return this.storage.restoreFromCookie(this.email_key||"")}}return e.prototype.needs=["storage"],e.prototype.user_key="__bugira_user",e.prototype.email_key="__bugira_email",e}.call(this),new i().load()})();
